'use strict';window.j.W("dataConductor",[]);
(function(t){t.Z("jsdcObjectStorageService",function(){return function(){function q(c){return d[c]||null}function l(c){var l=q(c);delete d[c];return l||null}function n(c){if(!c||"object"!==typeof c)throw Error("adapter MUST be an object");v.Fa.forEach(function(d){if("function"!==typeof c[d])throw Error('Object invalid. A function named "'+d+'" is expected to exist on the adapter');});v.ka.forEach(function(d){if(c.hasOwnProperty(d)&&"function"!==typeof c[d])throw Error('Object invalid. When supplied on the adapter, the property named "'+d+
'" MUST be a function');});v.Va.forEach(function(d){var p=c[d];if(!p||"object"!==typeof p)throw Error('Object invalid. An object property named "'+d+'" is expected to exist on the adapter');})}var v=this,d={};this.Fa=[];this.ka=[];this.Va=[];this.add=function(c,l){var p;a:{p=typeof c;null===c&&(p="null");switch(p){case "string":case "number":case "boolean":case "undefined":case "null":p=!0;break a;case "function":case "object":p=!1;break a}p=void 0}if(!p)throw Error("name MUST be a value type");if(d[c])throw Error('object named "'+
c+'" already exists');n(l);return d[c]=l};this.remove=l;this.all=function(){return Object.keys(d).map(function(c){return{name:c,s:d[c]}})};this.find=q;this.Ab=n;this.clear=function(){v.all().map(function(c){return c.name}).forEach(l)}}})})(window.j.W("dataConductor"));(function(t){t.Z("jsdcAdapterService",["jsdcObjectStorageService",function(q){function l(){q.call(this);this.Fa.push("find");this.ka.push("count");this.ka.push("info")}l.global=new l;return l}])})(window.j.W("dataConductor"));
(function(t){t.Z("jsdcIndexedCollection",function(){return function(q,l){function n(a,b,f){var k=c(a,f);if(a===q&&e[a][k]&&e[a][k].value===f&&-1<e[a][k].keys.indexOf(b))throw Error('cannot add duplicate primary key ("'+b+'")!');e[a][k]&&e[a][k].value===f||e[a].splice(k,0,{value:f,keys:[]});e[a][k].keys.push(b)}function v(a,b,f){var k=e[a];a=c(a,f);k[a]&&k[a].value===f&&(f=k[a].keys,b=f.indexOf(b),-1<b&&(f.splice(b,1),f.length||k.splice(a,1)))}function d(a,b){var f=c(a,b);return e[a][f]&&e[a][f].value===
b?e[a][f].keys:null}function c(a,b){function f(a,b,w,k){var e,c;w===k?a[w]&&a[w].value<b&&w++:(e=Math.floor(w/2+k/2),c=a[e].value,c===b?w=e:c<b?(e+1<=k&&e++,w=f(a,b,e,k)):(e-1>=w&&e--,w=f(a,b,w,e)));return w}var k=e[a];return k.length?f(k,b,0,k.length-1):0}function u(a,b,f){function k(e){var c=a[e];return c?b[c]>f[c]?1:b[c]<f[c]?-1:k(e+1):0}return k(0)}function p(a){return r[a]}var t=0,r={},y={},e={},b;if(!q||"string"!==typeof q)throw Error("primary MUST be a non empty string");if(!Array.isArray(l))throw Error("fields MUST be an array");
l=l.slice();l.unshift(q);for(b=0;b<l.length;b++)e[l[b]]=[];this.find=function(a,b){var f;if(1===arguments.length)b=a,a=q;else if(!e[a])throw Error('index named "'+a+'" does not exist');f=d(a,b);null===f&&(f=[]);return f.map(function(a){return r[a]})};this.la=function(a){return r[a]||null};this.add=function(a){var b=a[q],f={};l.forEach(function(b){f[b]=a[b]});r[b]=a;y[b]=f;l.forEach(function(f){n(f,b,a[f])});t++};this.remove=function(a){var b;l.forEach(function(b){v(b,a,y[a][b])});delete y[a];b=r[a];
delete r[a];t--;return b};this.count=function(){return t};this.update=function(a){var b=a[q];l.forEach(function(f){var e=y[b][f],c=a[f];e!==c&&(v(f,b,e),n(f,b,c));y[b][f]=a[f]})};this.all=function(a){function b(w){return w.keys.map(p).sort(u.bind(null,a))}Array.isArray(a)||(a=[a]);a=a.slice();var f=a[0]||q,c;-1===a.indexOf(q)&&a.push(q);if(e[f])return a.shift(),c=e[f].map(b),f=[],f=f.concat.apply(f,c);throw Error('index named "'+f+'" could not be found!');};this.clear=function(){t=0;r={};y={};l.forEach(function(a){e[a]=
[]})};this.min=function(a,b){function f(a){return a.keys}var c,d;1===arguments.length&&(b=a,a=q);b=b||1;if(1>b)throw Error("supplied count MUST be greater than 0");if(e[a])d=e[a].slice(0,b),d=d.map(f),c=[],c=c.concat.apply(c,d);else throw Error('index named "'+a+'" could not be found!');c=c.slice(0,b);return c.map(p)};this.max=function(a,b){var f,c;1===arguments.length&&(b=a,a=q);b=b||1;if(1>b)throw Error("supplied count MUST be greater than 0");if(e[a])f=e[a].length-1,c=e[a].slice(f-b,f),f=[],f=
f.concat.apply(f,c);else throw Error('index named "'+a+'" could not be found!');f=f.slice(f.length-b,f.length);return f.map(p)};this.oa=function(a,b){function f(a){return a.keys}var k,d;1===arguments.length&&(b=a,a=q);if(e[a])k=c(a,b),k=e[a].slice(0,k).map(f),d=[],d=d.concat.apply(d,k);else throw Error('index named "'+a+'" could not be found!');return d};this.Ia=function(a,b){function f(a){return a.keys}var k,d;1===arguments.length&&(b=a,a=q);if(e[a])d=e[a].length,k=c(a,b),e[a][k]&&e[a][k].value===
b&&k++,k=e[a].slice(k,d).map(f),d=[],d=d.concat.apply(d,k);else throw Error('index named "'+a+'" could not be found!');return d}}})})(window.j.W("dataConductor"));
(function(t){t.Z("jsdcQueue",[function(){return function(){function q(){var d;l?(d=l.data,(l=l.next)||(n=null),v--):d=null;return d}var l=null,n=null,v=0;this.$a=function(d){null===l?l=n={data:d,next:null}:n=n.next={data:d,next:null};v++};this.pb=function(d){null===l?l=n={data:d,next:null}:l={data:d,next:l};v++};this.Ya=q;this.remove=function(d){var c=l;if(c.data===d)return q();for(;c.next;){if(c.next.data===d)return c.next=c.next.next||null,v--,d;c=c.next}return null};this.ob=function(){var d,c,
n=l;d=d||0;for(c=0;c<d&&n;c++)n=n.next;return n?n.data:null};this.count=function(){return v};this.all=function(){for(var d=[],c=l;c;)d.push(c.data),c=c.next;return d}}}])})(window.j.W("dataConductor"));
(function(t){t.Z("jsdcIndexedPageCache",["jsdcEventEmitter","jsdcIndexedCollection",function(q,l){function n(){function p(a,c,f,e,d){y=(y+1)%(Number.j||Number.MAX_VALUE);a={index:a,w:c,P:f,F:e,data:d,Ka:null,G:y};b.items.add(a);return a}function t(a,c){function f(b){l(b.length,function(c){l(a,q.bind(null,b[c]*a))})}function d(b){n(b.length,function(c){n(a,q.bind(null,b[c]*a))})}function l(a,b){for(var c=0;c<a;c++)b(c)}function n(a,b){for(var c=a-1;0<=c;c--)b(c)}function q(x,f){var g=x+f,d=x+f,k=a,
m=c,h,l;k||(k=e.l());m||(m=e.l());h=Math.floor(g/k);g%=k;l=Math.floor(d/m);d%=m;if(h!==l||g!==d)if(h=b.items.la(h)){for(;h.data.length<k;)h.data.push(v);var n=b.items.la(l),m=Date.now(),u,z,k=h?h.data.length:e.l();if(n)h&&(l=1/k,k=1-l,u=h.w*l+n.w*k,m=h.F*l+n.F*k,z=h.P*l+n.P*k,n.w=u,n.P=z,n.F=m);else{u=h?h.w:1;z=h?h.P:m;m=h?h.F:m;n=u;u=z;var r=[];for(z=0;z<k;z++)r.push(v);n=p(l,n,u,m,r)}n.data[d]=h.data[g];h.data[g]=v}else(g=b.items.la(l))&&(g.data[d]=v)}function u(a){for(var b=0;b<g.length;b++)for(;g[b].data.length<
a;)g[b].data.push(v)}var r,m,g;a!==c&&(r=b.items.Ia(-1),m=b.items.oa(0),a>c?(d(r),f(m)):(g=b.items.all(),u(c),f(r),d(m)),g=b.items.all(),l(g.length,function(a){for(;g[a].data.length>c;)g[a].data.pop();-1<g[a].data.indexOf(v)&&b.items.remove(g[a].index)}))}function r(a){function d(a){b.items.remove("number"===typeof a?a:a.index)}var f=e.count();if(a<f){switch(e.C()){case c.P:a=b.items.min("stored",f-a);break;case c.F:a=b.items.min("modified",f-a);break;case c.w:a=b.items.min("touched",f-a);break;case c.G:a=
b.items.min("order",f-a);break;default:if("function"===typeof e.C())a=e.C()(b.items,a);else throw Error('Unrecognized purge mode "'+e.C()+'". Must be one of the following '+Object.keys(c).join(", ")+" or a function to be called with the items and count,  expecting an array of indexes to be removed to be returned.");}a.forEach(d)}}var y=0,e=this,b={items:new l("index",["touched","stored","modified","order"]),o:n.jb,C:n.Bb,B:n.gb,D:n.Ra,l:n.zb};q.call(this);this.ca=c;this.aa=d;this.S=u;this.l=function(){return b.l};
this.ya=function(a){var c;a=Math.floor(a);if(a!==b.l){if(0<a)e.D()===u.clear?b.items.clear():(t(b.l,a),r(e.o()));else throw Error("pageSize MUST be a positive integer");c=b.l;b.l=a;e.b("pageSizeChanged",a,c)}return a};this.D=function(){return b.D};this.Aa=function(a){var c;if(u[a])c=b.D,b.D=a,c!==a&&e.b("resizeChanged",a,c);else throw Error("resizeMode invalid. MUST be one of the following value: "+Object.keys(u).join(", ")+'. Got "'+a+'"');};this.B=function(){return b.B};this.va=function(a){function c(a){b.items.remove(a)}
var f;if(d[a])a!==b.B&&(a===d.ia&&(f=b.items.oa(0),f.forEach(c)),f=b.B,b.B=a,e.b("indexModeChanged",a,f));else throw Error("invalid indexMode value. MUST be one of the following value: "+Object.keys(d).join(", ")+'. Got "'+a+'"');};this.o=function(){return b.o};this.Oa=function(a){var c=e.o();a=a+1-1;if(0<a)a=Math.floor(a),r(a),b.o=a;else throw Error("maxItems MUST be a number greater than 0");c!==a&&e.b("maxItemsChanged",a,c);return b.o};this.C=function(){return b.C};this.Pa=function(a){var d=e.C();
if(c[a])b.C=a;else if("function"===typeof a)b.C=a;else throw Error('invalid purgeMode value "'+a+'". MUST be one of the following: "'+Object.keys(c)+'"');d!==a&&e.b("purgeModeChanged",a,d)};this.state=function(){return{o:e.o(),C:e.C(),B:e.B(),D:e.D(),l:e.l()}};this.da=function(a){if(!a||"object"!==typeof a)throw Error("supplied state MUST be an object");a.hasOwnProperty("maxItems")&&e.Oa(a.o);a.hasOwnProperty("purgeMode")&&e.Pa(a.C);a.hasOwnProperty("indexMode")&&e.va(a.B);a.hasOwnProperty("resizeMode")&&
e.Aa(a.D);a.hasOwnProperty("pageSize")&&e.ya(a.l)};this.f=function(a,c){var f;a=a+1-1;if(isNaN(a))throw Error("index MUST be a number");if(!Array.isArray(c))throw Error("cached items MUST be arrays");if(b.B===d.ia&&0>a)throw Error('index MUST be greater than or equal to 0 when indexMode is "positive"');f=b.items.find(a);f.length?(f[0].w++,f[0].F=(new Date).getTime(),f[0].data=c,b.items.update(f[0])):(p(a,1,(new Date).getTime(),(new Date).getTime(),c),r(e.o()),e.b("cached",c));return c};this.yb=function(a){a=
(a=b.items.remove(a))&&a.data;e.b("uncached",a);return a};this.count=function(){return b.items.count()};this.U=function(a){return b.items.all(a||"index").map(function(a){return{P:a.P,F:a.F,w:a.w,data:a.data,index:a.index}})};this.data=function(a){a=b.items.find(a);var c=a[0]&&a[0].data;a[0]&&(a[0].w++,b.items.update(a[0]));return c||null};this.info=function(a){a=b.items.find(a);var c=null;a[0]&&(c={w:a[0].w,P:a[0].P,F:a[0].F,G:a[0].G});return c};this.Ka=function(a){a=b.items.find(a);var c;a[0]?c=
a[0].Ka:c=null;return c};this.clear=b.items.clear}var v={},d={ia:"positive",Cb:"full"},c={P:"stored",F:"modified",w:"touched",G:"order"},u={clear:"clear",lb:"maintain"};n.jb=Number.MAX_VALUE;n.zb=10;n.Bb=c.w;n.gb=d.ia;n.Ra=u.clear;n.ca=c;n.aa=d;n.S=u;return n}])})(window.j.W("dataConductor"));
(function(t){t.Z("jsdcEventEmitter",[function(){return function(){function q(n,q){var d;l[n]?d=l[n]:("boolean"===typeof q?q:1)?(d=[],l[n]=d):d=null;return d}var l={};this.h=function(l,v){q(l).push(v)};this.b=function(l){function v(d){try{try{d.apply(d,c)}catch(l){console.warn("Event handler raised an error!"),console.error(l)}}catch(n){console.error("event handler caused error"),console.log(n)}}var d=q(l,!1),c;d&&(c=Array.prototype.slice(arguments),c.shift(),d.forEach(v))}}}])})(window.j.W("dataConductor"));
(function(t,q){q.Z("jsdcLoaderService",["$timeout","$q","jsdcEventEmitter","jsdcAdapterService","jsdcQueue","jsdcIndexedPageCache",function(l,n,q,d,c,u){function p(){function a(){m.f().clear();m.info().forEach(function(a){a.cancel()})}function w(a){a=m.info(a);return a.U||a.g||a.La||a.i}function f(a){function b(a){return parseInt(a,10)}var c,f,e,d,h;f=[];c=Object.keys(a).map(b);e=g.f.U();h=e.map(C);h=h.concat(c);h=h.concat(Object.keys(g.g).map(b));h=h.concat(Object.keys(g.i).map(b));h=h.filter(function(a,
b,c){return c.indexOf(a)===b});for(c=0;c<h.length;c++)d=c<e.length?e[c]:null,d=k(h[c],d,a[h[c]],g.g[h[c]],g.i[h[c]]),f.push(d);f.sort(function(a,b){return a.index-b.index});return f}function k(a,b,c,f,e){var d=null,h,g;b||(d=c||f||e);d?(h=d.loaded.H,g=d.cancel):(h=n.defer(),h.resolve(b||null),h=h.H,g=F);return{index:a,bb:!!b||!!f||!!e||!!c,U:b,m:d&&d.m||!1,g:!!f,i:!!e,La:!!c,cancel:g,loaded:h}}function E(){function a(b){var c,f,d,e,x,k,l,n=h.c.map(C);h.m=!0;f=Math.min.apply(Math,n);for(c=0;c<h.c.length;c++)x=
h.c[c],k=Math.floor(x.index/x.count),delete g.g[k],d=x.index-f,e=d+x.count,m.A()===r.ha&&null!==m.f().info(k)||m.f().f(k,b.slice(d,e));for(c=0;c<h.c.length;c++)x=h.c[c],d=x.index-f,e=d+x.count,l=b.slice(d,e),k=Math.floor(x.index/x.count),m.b("loaded",k,l),x.loaded.resolve(b.slice(d,e));b={Db:n,data:b};w.resolve(b);m.b("executed",b)}function b(a){function c(a){var b;b=h.c[a].index/h.c[a].count;g.i[b].splice(g.i[b].indexOf(h.c[a]),1);0===g.i[b].length&&delete g.i[b];f(h.c[a])}var d,x,e;h.m=!0;for(d=
0;d<h.c.length;d++)h.c[d].Ma?(h.c[d].Ma--,x=m.O(),c=f.bind(null,h.c[d]),e=Math.floor(h.c[d].index/h.c[d].count),Array.isArray(g.i[e])||(g.i[e]=[]),g.i[e].push(h.c[d]),x?l(c.bind(null,d),x):c()):f(h.c[d],a);w.reject(a)}function c(a){function b(a){return!a.m}var d;if(!h.m)if(m.J()===e.all){h.m=!0;h.cancel.resolve();for(d=0;d<h.c.length;d++)f(h.c[d],h.c[d].index===a?"cancelled":!1);w.reject("cancelled")}else if(m.J()===e.ha)d=h.c.filter(b),1===d.length&&(h.m=!0,h.cancel.resolve(),w.reject("cancelled")),
f(h.c[a],"cancelled");else throw Error('unrecognised batch cancel mode "'+m.J()+'"');}function f(a,b){b?(a.m=!0,a.loaded.reject(b)):(a.g=!1,a.m=!1,g.v.pb(a),m.R()===y.Ga?m.ga(!0):m.ga());delete g.g[Math.floor(a.index/a.count)]}var d,k,h,w;if(!g.I)throw Error("adapter has not been set. You must set an adapter before calling execute.");for(h=A();null===h&&g.v.count();)h=A();w=n.defer();if(h){for(d=0;d<h.c.length;d++)k=Math.floor(h.c[d].index/h.c[d].count),g.g[k]=h.c[d],h.c[d].g=!0,h.c[d].Qa&&h.c[d].Qa.then(c.bind(null,
h.c[d].index));h.cancel=n.defer();d=g.I.find(g.filter,{Hb:h.index,Eb:h.count,cancel:h.cancel.H});d.then(a).catch(b)}else w.resolve([]);return w.H}function A(){function a(b,c){b.index===c.index?b.count=Math.max(b.count,c.count):(b.count+=c.count,c.index<b.index&&(b.index-=c.count));b.c.push(c)}function b(a,c){var d=!1;m.K()&&c&&c!==D&&a.count<m.T()&&(d=a.index===c.index||a.index+a.count===c.index||a.index-c.count===c.index);return d}for(var c,d,f=null;!f||b(f,g.v.ob());){c=g.v.Ya();if(!c||c===D)break;
f||(f={index:c.index,count:0,c:[],m:!1});a(f,c)}f&&1===f.c.length&&m.A()===r.ha&&(d=Math.floor(f.index/f.count),c=w(d))&&(m.b("ignored",d),Array.isArray(c)?f.c[0].loaded.resolve(c):c.loaded.H.then(f.c[0].loaded.resolve).catch(f.c[0].loaded.reject),f=null);return f}function B(){function a(b){return this[b]}function b(a,c){return a.G-c.G}var c=g.v.count()+Object.keys(g.g).length+Object.keys(g.i).length,d=m.M();if(c>d)for(c=g.v.all().concat(Object.keys(g.g).map(a.bind(g.g))).concat(Object.keys(g.g).map(a.bind(g.i))),
c.sort(b);c.length>d;)c[0].cancel(),c.shift()}function C(a){return a.index}function F(){}var m=this,g={G:0,s:null,I:null,filter:null,f:new u,v:new c,pa:0,g:{},i:{},A:p.fb,R:p.cb,u:p.Ea,K:p.j,N:p.Sa,O:p.Ta,J:p.Wa,T:p.Da,M:p.hb,V:p.ib};q.call(this);this.ba=r;this.$=y;this.f=function(){return g.f};this.s=function(){return g.s};this.I=function(){return g.I};this.ra=function(a){var b,c;if("string"===typeof a){if(b=d.global.find(a),!b)throw Error('adapter named "'+a+'" not found!');}else if("object"===
typeof a)d.global.Ab(a),b=a;else throw Error('invalid adapter value. MUST be a string or an object. Got a "'+typeof a+'"');c=g.s;g.s=a;a!==c&&m.b("adapterChanged",a,c);g.I=b};this.filter=function(){return g.filter};this.ja=function(b){var c;t.ab(g.filter,b)||(c=g.filter,g.filter=b,a(),m.b("filterChanged",b,c))};this.u=function(){return g.u};this.za=function(a){var b;if(1<=a)b=g.u,b!==a&&(g.u=a,m.b("parallelChanged",a,b));else throw Error("parallel MUST be a number greater than or equal to 1");};this.K=
function(){return g.K};this.ta=function(a){var b=g.K;a!==b&&(g.K=a,m.b("batchingChanged",a,b))};this.J=function(){return g.J};this.rb=function(a){var b;if(e[a])b=g.J,a!==b&&(g.J=a,m.b("batchCancelModeChanged",a,b));else throw Error('invalid batchCancelMode value "'+a+'". Must be one of the following: '+Object.keys(e).join(", "));};this.T=function(){return g.T};this.M=function(){return g.M};this.wa=function(a){var b;if(0<a)b=g.M,b!==a&&(g.M=a,B(),m.b("loadMaxChanged",a,b));else throw Error("loadMax MUST be a number greater than 0");
};this.V=function(){return g.V};this.xa=function(a){var c;if(b[a])c=g.V,a!==c&&(g.V=a,m.b("loadOverflowModeChanged",a,c));else throw Error('invalid loadOverflowMode value "'+a+'". Must be one of the following: '+Object.keys(b).join(", "));};this.sa=function(a){if(0<a)g.T=a;else throw Error("batchMax MUST be a number greater than 0");};this.R=function(){return g.R};this.Na=function(a){var b;if(y[a])b=g.R,a!==b&&(g.R=a,m.b("executionModeChanged",a,b));else throw Error('invalid executionMode value "'+
a+'". Must be one of the following: '+Object.keys(y).join(", "));};this.A=function(){return g.A};this.ua=function(a){var b;if(r[a])b=g.A,a!==b&&(g.A=a,m.b("existingModeChanged",a,b));else throw Error('invalid existing mode value "'+a+'". MUST be one of the following: '+Object.keys(r).join(", "));};this.O=function(){return g.O};this.Ca=function(a){var b;if(0<=a)b=g.O,a!==b&&(g.O=a,m.b("retryDelayChanged",a,b));else throw Error("retryDelay MUST be number greater than or equal to 0");};this.N=function(){return g.N};
this.Ba=function(a){var b;if(0<=a)b=g.N,a!==b&&(g.N=a,m.b("retryCountChanged",a,b));else throw Error("retryCount MUST be number greater than or equal to 0");};this.state=function(){return{s:m.s(),filter:m.filter(),A:m.A(),R:m.R(),u:m.u(),K:m.K(),N:m.N(),O:m.O(),J:m.J()}};this.da=function(a){if(!a||"object"!==typeof a)throw Error("supplied state MUST be an object");a.hasOwnProperty("adapter")&&m.ra(a.s);a.hasOwnProperty("filter")&&m.ja(a.filter);a.hasOwnProperty("existingMode")&&m.ua(a.A);a.hasOwnProperty("executionMode")&&
m.Na(a.R);a.hasOwnProperty("parallel")&&m.za(a.u);a.hasOwnProperty("batching")&&m.ta(a.K);a.hasOwnProperty("batchMax")&&m.sa(a.T);a.hasOwnProperty("loadMax")&&m.wa(a.M);a.hasOwnProperty("loadOverflowMode")&&m.xa(a.V);a.hasOwnProperty("retryCount")&&m.Ba(a.N);a.hasOwnProperty("retryDelay")&&m.Ca(a.O);a.hasOwnProperty("batchCancelMode")&&m.rb(a.J)};this.load=function(a,c){function d(){e.resolve();k.m||(k.m=!0,k.g||g.v.remove(k))}var f,e,k,h;a=parseInt(a,10);if(isNaN(a))throw Error("supplied index MUST be a number");
f=n.defer();if(m.A()===r.Ha&&(h=m.info(a),h.bb&&!h.m))return m.b("dropped",a),h.U?f.resolve(h.U):h.loaded.then(f.resolve).catch(f.reject),f.H;g.G=(g.G+1)%(Number.j||Number.MAX_VALUE);h=g.f.l();e=n.defer();k={index:a*h,G:g.G,loaded:f,cancel:d,Qa:e.H,m:!1,Ma:m.N(),g:!1,count:h};if(c)if("function"===typeof c.then)c.then(d);else throw Error("when supplied, cancel MUST be a promise");g.v.$a(k);if(g.v.count()+Object.keys(g.g).length+Object.keys(g.i).length>m.M())if(m.V()===b.cancel)B(m.M());else throw Error("loadMax loads reached. Wait until some loads have completed before attempting to load new records.");
g.R===y.Ja&&m.ga();return f.H};this.info=function(a){var b=g.v.all(),c,d={},e;for(c=0;c<b.length;c++)e=Math.floor(b[c].index/b[c].count),d[e]=b[c];0<arguments.length?(b=m.f().data(a),d=k(a,b,d[a],g.g[a],g.i[a])):d=f(d);return d};this.ga=function(a){function b(){for(var a=m.u();g.pa<a&&g.v.count();)c()}function c(){g.pa++;E().then(d).eb(f)}function d(a){h.push(a)}function f(){g.pa--;!a&&g.v.count()?b():e.resolve(h)}var e,h=[];e=n.defer();g.v.count()?a?c():b():e.resolve(h);return e.H};this.clear=a}
var D={},r=p.ba={replace:"replace",ha:"ignore",Ha:"drop"},y=p.$={Ja:"instant",Ga:"delayed"},e=p.ea={all:"all",ha:"ignore"},b=p.fa={error:"error",cancel:"cancel"};p.Ea=1;p.j=!1;p.Ta=2E3;p.Sa=0;p.hb=Number.MAX_VALUE;p.Da=Number.MAX_VALUE;p.fb=r.Ha;p.cb=y.Ja;p.Wa=e.all;p.ib=b.error;return p}])})(window.j,window.j.W("dataConductor"));
(function(t,q){q.Z("jsdcIndexedPagerService",["$q","jsdcEventEmitter","jsdcIndexedPageCache","jsdcLoaderService",function(l,n,q,d){function c(){function p(a,b,c){c=parseInt(c,10);isNaN(c)||b[c].then(a.Gb.bind(a,c))}function q(){return b.a.f().l()}function r(){b.a.clear();b.index=null;b.count=0}function v(){function a(a,c){c&&b.L===u.ma&&(b.count=Math.max(b.count,a))}function c(){t--;t||d()}function d(a){a&&(r=a);!t&&r&&q.resolve(r)}var k=e.index()-e.Y(),n=e.index()+e.X(),p=!1,q=l.defer(),r,t;b.a.f().B()===
b.a.f().aa.ia&&(k=Math.max(0,k));if(null===e.index()||b.na)return q.resolve([]),{exec:q.H};for(;b.a.f().o()<n-k;)p?n--:k++,p=!p;p={};for(t=0;k<=n;k++)t++,p[k]=b.a.load(k),p[k].then(a.bind(null,k)).eb(c);b.a.ga().then(d).catch(q.reject);p.exec=q.H;return p}var e=this,b={index:null,na:!1,Fb:c.nb,qa:c.kb,Y:c.xb,X:c.qb,L:c.Xa,a:new d,count:0};n.call(this);this.Ua=u;this.ba=c.ba;this.$=c.$;this.ea=c.ea;this.ca=c.ca;this.aa=c.aa;this.S=c.S;this.fa=c.fa;b.a.f().Pa(function(a,b){function c(a){return isNaN(a)?
null:a}var d,l,n,p,q=e.index();d=a.oa(q);l=a.Ia(q);for(b--;b;)n=c(d[d.length-1]),p=c(l[0]),null!==n&&null!==p?(n=Math.abs(n-q),p=Math.abs(p-q),n>p?l.shift():d.pop()):null!==n?d.pop():l.shift(),b--;return d.concat(l)});b.a.Na(d.$.Ga);b.a.f().h("pageSizeChanged",this.b.bind(this,"pageSizeChanged"));b.a.f().h("indexModeChanged",this.b.bind(this,"indexModeChanged"));b.a.f().h("maxItemsChanged",this.b.bind(this,"maxPagesChanged"));b.a.f().h("cached",this.b.bind(this,"cached"));b.a.f().h("uncached",this.b.bind(this,
"removed"));b.a.h("adapterChanged",this.b.bind(this,"adapterChanged"));b.a.h("filterChanged",this.b.bind(this,"filterChanged"));b.a.h("parallelChanged",this.b.bind(this,"parallelChanged"));b.a.h("batchingChanged",this.b.bind(this,"batchingChanged"));b.a.h("batchCancelMode",this.b.bind(this,"batchCancelMode"));b.a.h("existingModeChanged",this.b.bind(this,"existingModeChanged"));b.a.h("retryDelayChanged",this.b.bind(this,"retryDelayChanged"));b.a.h("retryCountChanged",this.b.bind(this,"retryCountChanged"));
b.a.h("dropped",this.b.bind(this,"dropped"));b.a.h("ignored",this.b.bind(this,"ignored"));b.a.h("loaded",this.b.bind(this,"loaded"));this.index=function(){return b.index};this.tb=function(a){var c,d;a=Math.floor(a);if(isNaN(a))throw Error("index MUST be a number");d=b.index;c=l.defer();b.index=a;d!==a&&e.b("indexChanged",a,d);a=v();Object.keys(a).forEach(p.bind(null,c,a));a.exec.then(c.resolve).catch(c.reject)};this.s=function(){return b.a.s()};this.ra=function(a,c){var f=b.a.ra(a);if(!c){var k=e.I(),
l={u:d.Ea,max:d.Da,Za:!1};"function"===typeof k.info&&(k=k.info(),k.hasOwnProperty("parallel")&&(l.u=k.u),k.hasOwnProperty("max")&&(l.T=k.max),k.hasOwnProperty("dynamic")&&(l.D=k.Za?b.a.f().S.lb:b.a.f().S.clear));e.da(l)}return f};this.Y=function(){return b.Y};this.wb=function(a){var c;a=Math.floor(a);if(0<=a)c=b.Y,b.Y=a,c!==a&&e.b("padLowChanged",a,c),c=v(),a=l.defer(),Object.keys(c).forEach(p.bind(null,a,c)),c.exec.then(a.resolve).catch(a.reject);else throw Error("padLow MUST be set to a number greater than or equal to 0");
};this.X=function(){return b.X};this.vb=function(a){var c;a=Math.floor(a);if(0<=a)c=b.X,b.X=a,c!==a&&e.b("padHighChanged",a,c),c=v(),a=l.defer(),Object.keys(c).forEach(p.bind(null,a,c)),c.exec.then(a.resolve).catch(a.reject);else throw Error("padHigh MUST be set to a number greater than or equal to 0");};this.L=function(){return b.L};this.sb=function(a){var c;if(u[a])c=b.L,b.L=a,a===u.ma?b.count=b.a.f().U().length:b.count=0,c!==a&&e.b("countModeChanged",a,c);else throw Error('invalid countMode "'+
a+'". MUST be one of the following values: '+Object.keys(u).join(", "));};this.filter=function(){return b.a.filter()};this.ja=function(a){t.ab(e.filter(),a)||(b.a.ja(a),r())};this.l=q;this.ya=function(a){function c(a,d){a=Math.abs(a.index-b.index);d=Math.abs(d.index-b.index);return a===d?0:a>d?1:-1}var d=b.a.f(),e;a!==q()&&(d.ya(a),d.D()===d.S.clear||0===d.count()?b.index=null:null===d.info(b.index)&&(e=d.U().sort(c),b.index=e[0]),b.count=d.count());return a};this.state=function(){var a;a=b.a.f().state();
a=t.extend(a,b.a.state());a.qa=a.o;delete a.o;return a=t.extend(a,{index:e.index(),Y:e.Y(),X:e.X(),L:e.L(),filter:e.filter()})};this.da=function(a){if(!a||"object"!==typeof a)throw Error("supplied state MUST be an object");b.a.f().da(a);b.a.da(a);b.na=!0;a.hasOwnProperty("filter")&&e.ja(a.filter);a.hasOwnProperty("index")&&e.tb(a.index);a.hasOwnProperty("maxPages")&&e.ub(a.qa);a.hasOwnProperty("padLow")&&e.wb(a.Y);a.hasOwnProperty("padHigh")&&e.vb(a.X);b.na=!1;a.hasOwnProperty("countMode")&&e.sb(a.L);
a=v();return a=a.exec};this.D=b.a.f().D;this.Aa=b.a.f().Aa;this.B=b.a.f().B;this.va=b.a.f().va;this.qa=b.a.f().o;this.ub=b.a.f().Oa;this.I=b.a.I;this.u=b.a.u;this.za=b.a.za;this.K=b.a.K;this.ta=b.a.ta;this.T=b.a.T;this.sa=b.a.sa;this.M=b.a.M;this.wa=b.a.wa;this.V=b.a.V;this.xa=b.a.xa;this.N=b.a.N;this.Ba=b.a.Ba;this.O=b.a.O;this.Ca=b.a.Ca;this.A=b.a.A;this.ua=b.a.ua;this.clear=r;this.page=function(a){a=b.a.info(a);var c;a?c={index:a.index,data:a.U,g:a.La||a.g||a.i,cancel:a.cancel}:c=null;return c};
this.remove=b.a.f().yb;this.count=function(){var a=l.defer();switch(e.L()){case u.mb:a.resolve(null);break;case u.s:if(b.a.I().count)b.a.I().count(e.filter()).then(a.resolve).catch(a.reject);else throw Error("The currently set adapter does not support count");break;case u.fixed:case u.ma:a.resolve(b.count);break;default:throw Error('Unrecognised count mode "'+e.L()+'"');}return a.H}}var u=c.Ua={mb:"none",s:"adapter",fixed:"fixed",ma:"detect"};c.Xa=u.s;c.xb=0;c.qb=0;c.nb=1;c.kb=Number.j||Number.MAX_VALUE;
c.ba=d.ba;c.$=d.$;c.ea=d.ea;c.fa=d.fa;c.ca=q.ca;c.aa=q.aa;c.S=q.S;return c}])})(window.j,window.j.W("dataConductor"));
