'use strict';(function(D){var x;x=function(){function t(d,b,m){var g;if(d[b])throw Error('factory named "'+b+'" already exists!');if(!Array.isArray(m))throw Error("def MUST be an array. (Injection may only be done in the array styles)");g=m.slice(0,m.length-1);m=m[m.length-1];if("function"!==typeof m)throw Error("last item in the definition array MUST be a function");g=g.map(function(b){if(d[b])return d[b];if(r[b])return r[b];throw Error('No factory named "'+b+'" found');});g=m.apply(d,g);d[b]=g;
throw Error("not implemented");}function p(d){function b(b){var f=m(d[b]);m(g[b])&&f?p(d[b],g[b]):d[b]=g[b]}function m(b){var d=typeof b;return!b||"function"!==d&&"object"!==d?null:d}var g,f;return 2>arguments.length?d:m(d)?(g=arguments[1],m(g)&&(f=Object.keys(g),f.forEach(b)),f=Array.prototype.slice.call(arguments,2),f.unshift(d),p.apply({},f)):d}function f(d,b){var m,g,k,r,q;if(d===b)return!0;if(d&&b&&"function"!==typeof d&&"function"!==typeof b&&(m=Object.keys(d),g=Object.keys(b),m.length===g.length)){m.sort();
g.sort();for(q=0;q<m.length;q++){if(m[q]!==g[q])return!1;k=d[m[q]];r=b[g[q]];k=f(k,r);if(!k)return!1}return!0}return!1}var k={},r=function(){var d={};d.Ua=function(){function b(b){var f=d();return b(f.resolve,f.reject)}function d(){function b(c,w){w.apply(a,c)}var m=!1,f=[],k=[],e=[],c=[],a;return a={resolve:function(){m||(m=!0,f.forEach(b.bind(null,Array.prototype.slice.call(arguments))),c.forEach(b))},reject:function(){m||(m=!0,e.forEach(b.bind(null,Array.prototype.slice.call(arguments))),c.forEach(b))},
pb:function(){k.forEach(b.bind(null,Array.prototype.slice.call(arguments)))},m:function(){return{then:function(a,c,b){if("function"!==typeof a)throw Error("handler MUST be a function");f.push(a);"function"===typeof c&&k.push(c);"function"===typeof b&&e.push(b)},catch:function(a){if("function"!==typeof a)throw Error("handler MUST be a function");e.push(a)},Ka:function(a){if("function"!==typeof a)throw Error("handler MUST be a function");c.push(a)}}}()}}b.defer=d;b.all=function(d){function m(a,z){c--;
k[a]=z;c||e.resolve(k)}function f(){e.reject.apply(e,Array.prototype.slice.call(arguments))}var k,e,c;if(!d||"object"!==typeof d)throw Error("promises MUST be an object or an Array");Array.isArray(d)?k=[]:k={};e=b.defer();c=Object.keys(k).length;Object.keys(d).forEach(function(a){d.then(m.bind(null,a),void 0,f)});return e.m};return b}();d.Fb=function(){function b(b,f){var k,e=d.Ua.defer();e.then(b);k=g.length;g[k]=e;m[k]=e.m;setTimeout(function(){g.splice(k,1);m.splice(k,1);e.resolve()},f);return e.m}
var m=[],g=[];b.cancel=function(b){b=m.indexOf(b);return-1<b?(g[b].reject("cancelled"),!0):!1};return b}();return d}();return{P:function(d){var b;if(1===arguments.length)return k[d]||null;if(k[d])throw Error("module named "+d+" already exists!");b={ha:{}};b.V=t.bind(null,b.ha);k[d]=b},Ja:f,extend:p,ha:function(){var d=k.dataConductor;return d?d.ha:{}}}}();x.P("dataConductor",[]);(function(t){t.V("jsdcObjectStorageService",function(){return function(){function p(b){return d[b]||null}function f(b){var m=
p(b);delete d[b];return m||null}function k(b){if(!b||"object"!==typeof b)throw Error("adapter MUST be an object");r.Ga.forEach(function(d){if("function"!==typeof b[d])throw Error('Object invalid. A function named "'+d+'" is expected to exist on the adapter');});r.la.forEach(function(d){if(b.hasOwnProperty(d)&&"function"!==typeof b[d])throw Error('Object invalid. When supplied on the adapter, the property named "'+d+'" MUST be a function');});r.Za.forEach(function(d){var g=b[d];if(!g||"object"!==typeof g)throw Error('Object invalid. An object property named "'+
d+'" is expected to exist on the adapter');})}var r=this,d={};this.Ga=[];this.la=[];this.Za=[];this.add=function(b,f){var g;a:{g=typeof b;null===b&&(g="null");switch(g){case "string":case "number":case "boolean":case "undefined":case "null":g=!0;break a;case "function":case "object":g=!1;break a}g=void 0}if(!g)throw Error("name MUST be a value type");if(d[b])throw Error('object named "'+b+'" already exists');k(f);return d[b]=f};this.remove=f;this.all=function(){return Object.keys(d).map(function(b){return{name:b,
j:d[b]}})};this.find=p;this.Db=k;this.clear=function(){r.all().map(function(b){return b.name}).forEach(f)}}})})(x.P("dataConductor"));(function(t){t.V("jsdcAdapterService",["jsdcObjectStorageService",function(p){function f(){p.call(this);this.Ga.push("find");this.la.push("count");this.la.push("info")}f.global=new f;return f}])})(x.P("dataConductor"));(function(t){t.V("jsdcIndexedCollection",function(){return function(p,f){function k(a,c,w){var d=b(a,w);if(a===p&&e[a][d]&&e[a][d].value===w&&-1<e[a][d].keys.indexOf(c))throw Error('cannot add duplicate primary key ("'+
c+'")!');e[a][d]&&e[a][d].value===w||e[a].splice(d,0,{value:w,keys:[]});e[a][d].keys.push(c)}function r(a,c,d){var u=e[a];a=b(a,d);u[a]&&u[a].value===d&&(d=u[a].keys,c=d.indexOf(c),-1<c&&(d.splice(c,1),d.length||u.splice(a,1)))}function d(a,c){var d=b(a,c);return e[a][d]&&e[a][d].value===c?e[a][d].keys:null}function b(a,c){function b(a,c,d,z){var e,u;d===z?a[d]&&a[d].value<c&&d++:(e=Math.floor(d/2+z/2),u=a[e].value,u===c?d=e:u<c?(e+1<=z&&e++,d=b(a,c,e,z)):(e-1>=d&&e--,d=b(a,c,d,e)));return d}var d=
e[a];return d.length?b(d,c,0,d.length-1):0}function m(a,c,b){function d(e){var g=a[e];return g?c[g]>b[g]?1:c[g]<b[g]?-1:d(e+1):0}return d(0)}function g(a){return v[a]}var t=0,v={},q={},e={},c;if(!p||"string"!==typeof p)throw Error("primary MUST be a non empty string");if(!Array.isArray(f))throw Error("fields MUST be an array");f=f.slice();f.unshift(p);for(c=0;c<f.length;c++)e[f[c]]=[];this.find=function(a,c){var b;if(1===arguments.length)c=a,a=p;else if(!e[a])throw Error('index named "'+a+'" does not exist');
b=d(a,c);null===b&&(b=[]);return b.map(function(a){return v[a]})};this.ma=function(a){return v[a]||null};this.add=function(a){var c=a[p],b={};f.forEach(function(c){b[c]=a[c]});v[c]=a;q[c]=b;f.forEach(function(b){k(b,c,a[b])});t++};this.remove=function(a){var c;f.forEach(function(c){r(c,a,q[a][c])});delete q[a];c=v[a];delete v[a];t--;return c};this.count=function(){return t};this.update=function(a){var c=a[p];f.forEach(function(b){var d=q[c][b],e=a[b];d!==e&&(r(b,c,d),k(b,c,e));q[c][b]=a[b]})};this.all=
function(a){function c(b){return b.keys.map(g).sort(m.bind(null,a))}Array.isArray(a)||(a=[a]);a=a.slice();var b=a[0]||p,d;-1===a.indexOf(p)&&a.push(p);if(e[b])return a.shift(),d=e[b].map(c),b=[],b=b.concat.apply(b,d);throw Error('index named "'+b+'" could not be found!');};this.clear=function(){t=0;v={};q={};f.forEach(function(a){e[a]=[]})};this.min=function(a,c){function b(a){return a.keys}var d,f;1===arguments.length&&(c=a,a=p);c=c||1;if(1>c)throw Error("supplied count MUST be greater than 0");
if(e[a])f=e[a].slice(0,c),f=f.map(b),d=[],d=d.concat.apply(d,f);else throw Error('index named "'+a+'" could not be found!');d=d.slice(0,c);return d.map(g)};this.max=function(a,c){var b,d;1===arguments.length&&(c=a,a=p);c=c||1;if(1>c)throw Error("supplied count MUST be greater than 0");if(e[a])b=e[a].length-1,d=e[a].slice(b-c,b),b=[],b=b.concat.apply(b,d);else throw Error('index named "'+a+'" could not be found!');b=b.slice(b.length-c,b.length);return b.map(g)};this.pa=function(a,c){function d(a){return a.keys}
var g,f;1===arguments.length&&(c=a,a=p);if(e[a])g=b(a,c),g=e[a].slice(0,g).map(d),f=[],f=f.concat.apply(f,g);else throw Error('index named "'+a+'" could not be found!');return f};this.La=function(a,c){function d(a){return a.keys}var g,f;1===arguments.length&&(c=a,a=p);if(e[a])f=e[a].length,g=b(a,c),e[a][g]&&e[a][g].value===c&&g++,g=e[a].slice(g,f).map(d),f=[],f=f.concat.apply(f,g);else throw Error('index named "'+a+'" could not be found!');return f}}})})(x.P("dataConductor"));(function(t){t.V("jsdcQueue",
[function(){return function(){function p(){var d;f?(d=f.data,(f=f.next)||(k=null),r--):d=null;return d}var f=null,k=null,r=0;this.eb=function(d){null===f?f=k={data:d,next:null}:k=k.next={data:d,next:null};r++};this.sb=function(d){null===f?f=k={data:d,next:null}:f={data:d,next:f};r++};this.bb=p;this.remove=function(d){var b=f;if(b.data===d)return p();for(;b.next;){if(b.next.data===d)return b.next=b.next.next||null,r--,d;b=b.next}return null};this.rb=function(){var d,b,k=f;d=d||0;for(b=0;b<d&&k;b++)k=
k.next;return k?k.data:null};this.count=function(){return r};this.all=function(){for(var d=[],b=f;b;)d.push(b.data),b=b.next;return d}}}])})(x.P("dataConductor"));(function(t){t.V("jsdcIndexedPageCache",["jsdcEventEmitter","jsdcIndexedCollection",function(p,f){function k(){function g(a,b,d,e,g){q=(q+1)%(Number.ca||Number.MAX_VALUE);a={index:a,w:b,N:d,F:e,data:g,Na:null,G:q};c.items.add(a);return a}function t(a,b){function d(c){k(c.length,function(b){k(a,p.bind(null,c[b]*a))})}function f(c){m(c.length,
function(b){m(a,p.bind(null,c[b]*a))})}function k(a,c){for(var b=0;b<a;b++)c(b)}function m(a,c){for(var b=a-1;0<=b;b--)c(b)}function p(d,h){var f=d+h,k=d+h,n=a,m=b,l,w;n||(n=e.l());m||(m=e.l());l=Math.floor(f/n);f%=n;w=Math.floor(k/m);k%=m;if(l!==w||f!==k)if(l=c.items.ma(l)){for(;l.data.length<n;)l.data.push(r);var u=c.items.ma(w),m=Date.now(),q,A,n=l?l.data.length:e.l();if(u)l&&(w=1/n,n=1-w,q=l.w*w+u.w*n,m=l.F*w+u.F*n,A=l.N*w+u.N*n,u.w=q,u.N=A,u.F=m);else{q=l?l.w:1;A=l?l.N:m;m=l?l.F:m;u=q;q=A;var t=
[];for(A=0;A<n;A++)t.push(r);u=g(w,u,q,m,t)}u.data[k]=l.data[f];l.data[f]=r}else(f=c.items.ma(w))&&(f.data[k]=r)}function q(a){for(var c=0;c<h.length;c++)for(;h[c].data.length<a;)h[c].data.push(r)}var v,n,h;a!==b&&(v=c.items.La(-1),n=c.items.pa(0),a>b?(f(v),d(n)):(h=c.items.all(),q(b),d(v),f(n)),h=c.items.all(),k(h.length,function(a){for(;h[a].data.length>b;)h[a].data.pop();-1<h[a].data.indexOf(r)&&c.items.remove(h[a].index)}))}function v(a){function d(a){c.items.remove("number"===typeof a?a:a.index)}
var f=e.count();if(a<f){switch(e.C()){case b.N:a=c.items.min("stored",f-a);break;case b.F:a=c.items.min("modified",f-a);break;case b.w:a=c.items.min("touched",f-a);break;case b.G:a=c.items.min("order",f-a);break;default:if("function"===typeof e.C())a=e.C()(c.items,a);else throw Error('Unrecognized purge mode "'+e.C()+'". Must be one of the following '+Object.keys(b).join(", ")+" or a function to be called with the items and count,  expecting an array of indexes to be removed to be returned.");}a.forEach(d)}}
var q=0,e=this,c={items:new f("index",["touched","stored","modified","order"]),s:k.lb,C:k.Eb,B:k.ib,D:k.Va,l:k.Cb};p.call(this);this.ba=b;this.$=d;this.R=m;this.l=function(){return c.l};this.za=function(a){var b;a=Math.floor(a);if(a!==c.l){if(0<a)e.D()===m.clear?c.items.clear():(t(c.l,a),v(e.s()));else throw Error("pageSize MUST be a positive integer");b=c.l;c.l=a;e.b("pageSizeChanged",a,b)}return a};this.D=function(){return c.D};this.Ba=function(a){var b;if(m[a])b=c.D,c.D=a,b!==a&&e.b("resizeChanged",
a,b);else throw Error("resizeMode invalid. MUST be one of the following value: "+Object.keys(m).join(", ")+'. Got "'+a+'"');};this.B=function(){return c.B};this.wa=function(a){function b(a){c.items.remove(a)}var f;if(d[a])a!==c.B&&(a===d.ja&&(f=c.items.pa(0),f.forEach(b)),f=c.B,c.B=a,e.b("indexModeChanged",a,f));else throw Error("invalid indexMode value. MUST be one of the following value: "+Object.keys(d).join(", ")+'. Got "'+a+'"');};this.s=function(){return c.s};this.Ra=function(a){var b=e.s();
a=a+1-1;if(0<a)a=Math.floor(a),v(a),c.s=a;else throw Error("maxItems MUST be a number greater than 0");b!==a&&e.b("maxItemsChanged",a,b);return c.s};this.C=function(){return c.C};this.Sa=function(a){var d=e.C();if(b[a])c.C=a;else if("function"===typeof a)c.C=a;else throw Error('invalid purgeMode value "'+a+'". MUST be one of the following: "'+Object.keys(b)+'"');d!==a&&e.b("purgeModeChanged",a,d)};this.state=function(){return{s:e.s(),C:e.C(),B:e.B(),D:e.D(),l:e.l()}};this.da=function(a){if(!a||"object"!==
typeof a)throw Error("supplied state MUST be an object");a.hasOwnProperty("maxItems")&&e.Ra(a.s);a.hasOwnProperty("purgeMode")&&e.Sa(a.C);a.hasOwnProperty("indexMode")&&e.wa(a.B);a.hasOwnProperty("resizeMode")&&e.Ba(a.D);a.hasOwnProperty("pageSize")&&e.za(a.l)};this.f=function(a,b){var f;a=a+1-1;if(isNaN(a))throw Error("index MUST be a number");if(!Array.isArray(b))throw Error("cached items MUST be arrays");if(c.B===d.ja&&0>a)throw Error('index MUST be greater than or equal to 0 when indexMode is "positive"');
f=c.items.find(a);f.length?(f[0].w++,f[0].F=(new Date).getTime(),f[0].data=b,c.items.update(f[0])):(g(a,1,(new Date).getTime(),(new Date).getTime(),b),v(e.s()),e.b("cached",b));return b};this.Bb=function(a){a=(a=c.items.remove(a))&&a.data;e.b("uncached",a);return a};this.count=function(){return c.items.count()};this.U=function(a){return c.items.all(a||"index").map(function(a){return{N:a.N,F:a.F,w:a.w,data:a.data,index:a.index}})};this.data=function(a){a=c.items.find(a);var b=a[0]&&a[0].data;a[0]&&
(a[0].w++,c.items.update(a[0]));return b||null};this.info=function(a){a=c.items.find(a);var b=null;a[0]&&(b={w:a[0].w,N:a[0].N,F:a[0].F,G:a[0].G});return b};this.Na=function(a){a=c.items.find(a);var b;a[0]?b=a[0].Na:b=null;return b};this.clear=c.items.clear}var r={},d={ja:"positive",Gb:"full"},b={N:"stored",F:"modified",w:"touched",G:"order"},m={clear:"clear",nb:"maintain"};k.lb=Number.MAX_VALUE;k.Cb=10;k.Eb=b.w;k.ib=d.ja;k.Va=m.clear;k.ba=b;k.$=d;k.R=m;return k}])})(x.P("dataConductor"));(function(t){t.V("jsdcEventEmitter",
[function(){return function(){function p(k,r){var d;f[k]?d=f[k]:("boolean"===typeof r?r:1)?(d=[],f[k]=d):d=null;return d}var f={};this.h=function(f,r){p(f).push(r)};this.b=function(f){function r(d){try{try{d.apply(d,b)}catch(f){console.warn("Event handler raised an error!"),console.error(f)}}catch(k){console.error("event handler caused error"),console.log(k)}}var d=p(f,!1),b;d&&(b=Array.prototype.slice(arguments),b.shift(),d.forEach(r))}}}])})(x.P("dataConductor"));(function(t,p){p.V("jsdcLoaderService",
["$timeout","$q","jsdcEventEmitter","jsdcAdapterService","jsdcQueue","jsdcIndexedPageCache",function(f,k,r,d,b,m){function g(){function a(){n.f().clear();n.info().forEach(function(a){a.cancel()})}function z(a){a=n.info(a);return a.U||a.g||a.Oa||a.i}function w(a){function c(a){return parseInt(a,10)}var b,d,e,f,l;d=[];b=Object.keys(a).map(c);e=h.f.U();l=e.map(x);l=l.concat(b);l=l.concat(Object.keys(h.g).map(c));l=l.concat(Object.keys(h.i).map(c));l=l.filter(function(a,b,c){return c.indexOf(a)===b});
for(b=0;b<l.length;b++)f=b<e.length?e[b]:null,f=u(l[b],f,a[l[b]],h.g[l[b]],h.i[l[b]]),d.push(f);d.sort(function(a,b){return a.index-b.index});return d}function u(a,b,c,d,e){var f=null,l,h;b||(f=c||d||e);f?(l=f.loaded.m,h=f.cancel):(l=k.defer(),l.resolve(b||null),l=l.m,h=F);return{index:a,fb:!!b||!!d||!!e||!!c,U:b,o:f&&f.o||!1,g:!!d,i:!!e,Oa:!!c,cancel:h,loaded:l}}function E(){function a(b){var c,d,f,e,y,g,k,m=l.c.map(x);l.o=!0;d=Math.min.apply(Math,m);for(c=0;c<l.c.length;c++)y=l.c[c],g=Math.floor(y.index/
y.count),delete h.g[g],f=y.index-d,e=f+y.count,n.A()===v.ia&&null!==n.f().info(g)||n.f().f(g,b.slice(f,e));for(c=0;c<l.c.length;c++)y=l.c[c],f=y.index-d,e=f+y.count,k=b.slice(f,e),g=Math.floor(y.index/y.count),n.b("loaded",g,k),y.loaded.resolve(b.slice(f,e));b={Hb:m,data:b};u.resolve(b);n.b("executed",b)}function b(a){function c(a){var b;b=l.c[a].index/l.c[a].count;h.i[b].splice(h.i[b].indexOf(l.c[a]),1);0===h.i[b].length&&delete h.i[b];d(l.c[a])}var e,y,g;l.o=!0;for(e=0;e<l.c.length;e++)l.c[e].Pa?
(l.c[e].Pa--,y=n.M(),c=d.bind(null,l.c[e]),g=Math.floor(l.c[e].index/l.c[e].count),Array.isArray(h.i[g])||(h.i[g]=[]),h.i[g].push(l.c[e]),y?f(c.bind(null,e),y):c()):d(l.c[e],a);u.reject(a)}function c(a){function b(a){return!a.o}var f;if(!l.o)if(n.H()===e.all){l.o=!0;l.cancel.resolve();for(f=0;f<l.c.length;f++)d(l.c[f],l.c[f].index===a?"cancelled":!1);u.reject("cancelled")}else if(n.H()===e.ia)f=l.c.filter(b),1===f.length&&(l.o=!0,l.cancel.resolve(),u.reject("cancelled")),d(l.c[a],"cancelled");else throw Error('unrecognised batch cancel mode "'+
n.H()+'"');}function d(a,b){b?(a.o=!0,a.loaded.reject(b)):(a.g=!1,a.o=!1,h.v.sb(a),n.O()===q.Ha?n.ga(!0):n.ga());delete h.g[Math.floor(a.index/a.count)]}var g,m,l,u;if(!h.S)throw Error("adapter has not been set. You must set an adapter before calling execute.");for(l=B();null===l&&h.v.count();)l=B();u=k.defer();if(l){for(g=0;g<l.c.length;g++)m=Math.floor(l.c[g].index/l.c[g].count),h.g[m]=l.c[g],l.c[g].g=!0,l.c[g].Ta&&l.c[g].Ta.then(c.bind(null,l.c[g].index));l.cancel=k.defer();g=h.S.find(h.filter,
{Kb:l.index,Ib:l.count,cancel:l.cancel.m});g.then(a).catch(b)}else u.resolve([]);return u.m}function B(){function a(b,c){b.index===c.index?b.count=Math.max(b.count,c.count):(b.count+=c.count,c.index<b.index&&(b.index-=c.count));b.c.push(c)}function b(a,c){var d=!1;n.I()&&c&&c!==p&&a.count<n.T()&&(d=a.index===c.index||a.index+a.count===c.index||a.index-c.count===c.index);return d}for(var c,d,e=null;!e||b(e,h.v.rb());){c=h.v.bb();if(!c||c===p)break;e||(e={index:c.index,count:0,c:[],o:!1});a(e,c)}e&&
1===e.c.length&&n.A()===v.ia&&(d=Math.floor(e.index/e.count),c=z(d))&&(n.b("ignored",d),Array.isArray(c)?e.c[0].loaded.resolve(c):c.loaded.m.then(e.c[0].loaded.resolve).catch(e.c[0].loaded.reject),e=null);return e}function C(){function a(c){return this[c]}function b(a,c){return a.G-c.G}var c=h.v.count()+Object.keys(h.g).length+Object.keys(h.i).length,d=n.K();if(c>d)for(c=h.v.all().concat(Object.keys(h.g).map(a.bind(h.g))).concat(Object.keys(h.g).map(a.bind(h.i))),c.sort(b);c.length>d;)c[0].cancel(),
c.shift()}function x(a){return a.index}function F(){}var n=this,h={G:0,j:null,S:null,filter:null,f:new m,v:new b,qa:0,g:{},i:{},A:g.hb,O:g.gb,u:g.Fa,I:g.ca,L:g.Wa,M:g.Xa,H:g.$a,T:g.Ea,K:g.jb,W:g.kb};r.call(this);this.aa=v;this.Z=q;this.f=function(){return h.f};this.j=function(){return h.j};this.S=function(){return h.S};this.sa=function(a){var c,b;if("string"===typeof a){if(c=d.global.find(a),!c)throw Error('adapter named "'+a+'" not found!');}else if("object"===typeof a)d.global.Db(a),c=a;else throw Error('invalid adapter value. MUST be a string or an object. Got a "'+
typeof a+'"');b=h.j;h.j=a;a!==b&&n.b("adapterChanged",a,b);h.S=c};this.filter=function(){return h.filter};this.ka=function(c){var b;t.Ja(h.filter,c)||(b=h.filter,h.filter=c,a(),n.b("filterChanged",c,b))};this.u=function(){return h.u};this.Aa=function(a){var c;if(1<=a)c=h.u,c!==a&&(h.u=a,n.b("parallelChanged",a,c));else throw Error("parallel MUST be a number greater than or equal to 1");};this.I=function(){return h.I};this.ua=function(a){var c=h.I;a!==c&&(h.I=a,n.b("batchingChanged",a,c))};this.H=
function(){return h.H};this.ub=function(a){var c;if(e[a])c=h.H,a!==c&&(h.H=a,n.b("batchCancelModeChanged",a,c));else throw Error('invalid batchCancelMode value "'+a+'". Must be one of the following: '+Object.keys(e).join(", "));};this.T=function(){return h.T};this.K=function(){return h.K};this.xa=function(a){var c;if(0<a)c=h.K,c!==a&&(h.K=a,C(),n.b("loadMaxChanged",a,c));else throw Error("loadMax MUST be a number greater than 0");};this.W=function(){return h.W};this.ya=function(a){var b;if(c[a])b=
h.W,a!==b&&(h.W=a,n.b("loadOverflowModeChanged",a,b));else throw Error('invalid loadOverflowMode value "'+a+'". Must be one of the following: '+Object.keys(c).join(", "));};this.ta=function(a){if(0<a)h.T=a;else throw Error("batchMax MUST be a number greater than 0");};this.O=function(){return h.O};this.Qa=function(a){var c;if(q[a])c=h.O,a!==c&&(h.O=a,n.b("executionModeChanged",a,c));else throw Error('invalid executionMode value "'+a+'". Must be one of the following: '+Object.keys(q).join(", "));};
this.A=function(){return h.A};this.va=function(a){var c;if(v[a])c=h.A,a!==c&&(h.A=a,n.b("existingModeChanged",a,c));else throw Error('invalid existing mode value "'+a+'". MUST be one of the following: '+Object.keys(v).join(", "));};this.M=function(){return h.M};this.Da=function(a){var c;if(0<=a)c=h.M,a!==c&&(h.M=a,n.b("retryDelayChanged",a,c));else throw Error("retryDelay MUST be number greater than or equal to 0");};this.L=function(){return h.L};this.Ca=function(a){var c;if(0<=a)c=h.L,a!==c&&(h.L=
a,n.b("retryCountChanged",a,c));else throw Error("retryCount MUST be number greater than or equal to 0");};this.state=function(){return{j:n.j(),filter:n.filter(),A:n.A(),O:n.O(),u:n.u(),I:n.I(),L:n.L(),M:n.M(),H:n.H()}};this.da=function(a){if(!a||"object"!==typeof a)throw Error("supplied state MUST be an object");a.hasOwnProperty("adapter")&&n.sa(a.j);a.hasOwnProperty("filter")&&n.ka(a.filter);a.hasOwnProperty("existingMode")&&n.va(a.A);a.hasOwnProperty("executionMode")&&n.Qa(a.O);a.hasOwnProperty("parallel")&&
n.Aa(a.u);a.hasOwnProperty("batching")&&n.ua(a.I);a.hasOwnProperty("batchMax")&&n.ta(a.T);a.hasOwnProperty("loadMax")&&n.xa(a.K);a.hasOwnProperty("loadOverflowMode")&&n.ya(a.W);a.hasOwnProperty("retryCount")&&n.Ca(a.L);a.hasOwnProperty("retryDelay")&&n.Da(a.M);a.hasOwnProperty("batchCancelMode")&&n.ub(a.H)};this.load=function(a,b){function d(){f.resolve();g.o||(g.o=!0,g.g||h.v.remove(g))}var e,f,g,l;a=parseInt(a,10);if(isNaN(a))throw Error("supplied index MUST be a number");e=k.defer();if(n.A()===
v.Ia&&(l=n.info(a),l.fb&&!l.o))return n.b("dropped",a),l.U?e.resolve(l.U):l.loaded.then(e.resolve).catch(e.reject),e.m;h.G=(h.G+1)%(Number.ca||Number.MAX_VALUE);l=h.f.l();f=k.defer();g={index:a*l,G:h.G,loaded:e,cancel:d,Ta:f.m,o:!1,Pa:n.L(),g:!1,count:l};if(b)if("function"===typeof b.then)b.then(d);else throw Error("when supplied, cancel MUST be a promise");h.v.eb(g);if(h.v.count()+Object.keys(h.g).length+Object.keys(h.i).length>n.K())if(n.W()===c.cancel)C(n.K());else throw Error("loadMax loads reached. Wait until some loads have completed before attempting to load new records.");
h.O===q.Ma&&n.ga();return e.m};this.info=function(a){var c=h.v.all(),b,d={},e;for(b=0;b<c.length;b++)e=Math.floor(c[b].index/c[b].count),d[e]=c[b];0<arguments.length?(c=n.f().data(a),d=u(a,c,d[a],h.g[a],h.i[a])):d=w(d);return d};this.ga=function(a){function c(){for(var a=n.u();h.qa<a&&h.v.count();)b()}function b(){h.qa++;E().then(d).Ka(e)}function d(a){g.push(a)}function e(){h.qa--;!a&&h.v.count()?c():f.resolve(g)}var f,g=[];f=k.defer();h.v.count()?a?b():c():f.resolve(g);return f.m};this.clear=a}
var p={},v=g.aa={replace:"replace",ia:"ignore",Ia:"drop"},q=g.Z={Ma:"instant",Ha:"delayed"},e=g.ea={all:"all",ia:"ignore"},c=g.fa={error:"error",cancel:"cancel"};g.Fa=1;g.ca=!1;g.Xa=2E3;g.Wa=0;g.jb=Number.MAX_VALUE;g.Ea=Number.MAX_VALUE;g.hb=v.Ia;g.gb=q.Ma;g.$a=e.all;g.kb=c.error;return g}])})(x,x.P("dataConductor"));(function(t,p){p.V("jsdcIndexedPagerService",["$q","jsdcEventEmitter","jsdcIndexedPageCache","jsdcLoaderService",function(f,k,p,d){function b(){function g(a,c,b){b=parseInt(b,10);isNaN(b)||
c[b].then(a.pb.bind(a,b))}function p(){return c.a.f().l()}function r(){c.a.clear();c.index=null;c.count=0}function q(){function a(a,b){b&&c.J===m.na&&(c.count=Math.max(c.count,a))}function b(){t--;t||d()}function d(a){a&&(r=a);!t&&r&&q.resolve(r)}var g=e.index()-e.Y(),k=e.index()+e.X(),p=!1,q=f.defer(),r,t;c.a.f().B()===c.a.f().$.ja&&(g=Math.max(0,g));if(null===e.index()||c.oa)return q.resolve([]),{exec:q.m};for(;c.a.f().s()<k-g;)p?k--:g++,p=!p;p={};for(t=0;g<=k;g++)t++,p[g]=c.a.load(g),p[g].then(a.bind(null,
g)).Ka(b);c.a.ga().then(d).catch(q.reject);p.exec=q.m;return p}var e=this,c={index:null,oa:!1,Jb:b.qb,ra:b.mb,Y:b.Ab,X:b.tb,J:b.ab,a:new d,count:0};k.call(this);this.Ya=m;this.aa=b.aa;this.Z=b.Z;this.ea=b.ea;this.ba=b.ba;this.$=b.$;this.R=b.R;this.fa=b.fa;c.a.f().Sa(function(a,c){function b(a){return isNaN(a)?null:a}var d,f,g,k,m=e.index();d=a.pa(m);f=a.La(m);for(c--;c;)g=b(d[d.length-1]),k=b(f[0]),null!==g&&null!==k?(g=Math.abs(g-m),k=Math.abs(k-m),g>k?f.shift():d.pop()):null!==g?d.pop():f.shift(),
c--;return d.concat(f)});c.a.Qa(d.Z.Ha);c.a.f().h("pageSizeChanged",this.b.bind(this,"pageSizeChanged"));c.a.f().h("indexModeChanged",this.b.bind(this,"indexModeChanged"));c.a.f().h("maxItemsChanged",this.b.bind(this,"maxPagesChanged"));c.a.f().h("cached",this.b.bind(this,"cached"));c.a.f().h("uncached",this.b.bind(this,"removed"));c.a.h("adapterChanged",this.b.bind(this,"adapterChanged"));c.a.h("filterChanged",this.b.bind(this,"filterChanged"));c.a.h("parallelChanged",this.b.bind(this,"parallelChanged"));
c.a.h("batchingChanged",this.b.bind(this,"batchingChanged"));c.a.h("batchCancelMode",this.b.bind(this,"batchCancelMode"));c.a.h("existingModeChanged",this.b.bind(this,"existingModeChanged"));c.a.h("retryDelayChanged",this.b.bind(this,"retryDelayChanged"));c.a.h("retryCountChanged",this.b.bind(this,"retryCountChanged"));c.a.h("dropped",this.b.bind(this,"dropped"));c.a.h("ignored",this.b.bind(this,"ignored"));c.a.h("loaded",this.b.bind(this,"loaded"));this.index=function(){return c.index};this.wb=function(a){var b,
d;a=Math.floor(a);if(isNaN(a))throw Error("index MUST be a number");d=c.index;b=f.defer();c.index=a;d!==a&&e.b("indexChanged",a,d);a=q();Object.keys(a).forEach(g.bind(null,b,a));a.exec.then(b.resolve).catch(b.reject)};this.j=function(){return c.a.j()};this.sa=function(a,b){var f=c.a.sa(a);if(!b){var g=e.S(),k={u:d.Fa,max:d.Ea,cb:!1};"function"===typeof g.info&&(g=g.info(),g.hasOwnProperty("parallel")&&(k.u=g.u),g.hasOwnProperty("max")&&(k.T=g.max),g.hasOwnProperty("dynamic")&&(k.D=g.cb?c.a.f().R.nb:
c.a.f().R.clear));e.da(k)}return f};this.Y=function(){return c.Y};this.zb=function(a){var b;a=Math.floor(a);if(0<=a)b=c.Y,c.Y=a,b!==a&&e.b("padLowChanged",a,b),b=q(),a=f.defer(),Object.keys(b).forEach(g.bind(null,a,b)),b.exec.then(a.resolve).catch(a.reject);else throw Error("padLow MUST be set to a number greater than or equal to 0");};this.X=function(){return c.X};this.yb=function(a){var b;a=Math.floor(a);if(0<=a)b=c.X,c.X=a,b!==a&&e.b("padHighChanged",a,b),b=q(),a=f.defer(),Object.keys(b).forEach(g.bind(null,
a,b)),b.exec.then(a.resolve).catch(a.reject);else throw Error("padHigh MUST be set to a number greater than or equal to 0");};this.J=function(){return c.J};this.vb=function(a){var b;if(m[a])b=c.J,c.J=a,a===m.na?c.count=c.a.f().U().length:c.count=0,b!==a&&e.b("countModeChanged",a,b);else throw Error('invalid countMode "'+a+'". MUST be one of the following values: '+Object.keys(m).join(", "));};this.filter=function(){return c.a.filter()};this.ka=function(a){t.Ja(e.filter(),a)||(c.a.ka(a),r())};this.l=
p;this.za=function(a){function b(a,d){a=Math.abs(a.index-c.index);d=Math.abs(d.index-c.index);return a===d?0:a>d?1:-1}var d=c.a.f(),e;a!==p()&&(d.za(a),d.D()===d.R.clear||0===d.count()?c.index=null:null===d.info(c.index)&&(e=d.U().sort(b),c.index=e[0]),c.count=d.count());return a};this.state=function(){var a;a=c.a.f().state();a=t.extend(a,c.a.state());a.ra=a.s;delete a.s;return a=t.extend(a,{index:e.index(),Y:e.Y(),X:e.X(),J:e.J(),filter:e.filter()})};this.da=function(a){if(!a||"object"!==typeof a)throw Error("supplied state MUST be an object");
c.a.f().da(a);c.a.da(a);c.oa=!0;a.hasOwnProperty("filter")&&e.ka(a.filter);a.hasOwnProperty("index")&&e.wb(a.index);a.hasOwnProperty("maxPages")&&e.xb(a.ra);a.hasOwnProperty("padLow")&&e.zb(a.Y);a.hasOwnProperty("padHigh")&&e.yb(a.X);c.oa=!1;a.hasOwnProperty("countMode")&&e.vb(a.J);a=q();return a=a.exec};this.D=c.a.f().D;this.Ba=c.a.f().Ba;this.B=c.a.f().B;this.wa=c.a.f().wa;this.ra=c.a.f().s;this.xb=c.a.f().Ra;this.S=c.a.S;this.u=c.a.u;this.Aa=c.a.Aa;this.I=c.a.I;this.ua=c.a.ua;this.T=c.a.T;this.ta=
c.a.ta;this.K=c.a.K;this.xa=c.a.xa;this.W=c.a.W;this.ya=c.a.ya;this.L=c.a.L;this.Ca=c.a.Ca;this.M=c.a.M;this.Da=c.a.Da;this.A=c.a.A;this.va=c.a.va;this.clear=r;this.page=function(a){a=c.a.info(a);var b;a?b={index:a.index,data:a.U,g:a.Oa||a.g||a.i,cancel:a.cancel}:b=null;return b};this.remove=c.a.f().Bb;this.count=function(){var a=f.defer();switch(e.J()){case m.ob:a.resolve(null);break;case m.j:if(c.a.j().count)c.a.j().count(e.filter()).then(a.resolve).catch(a.reject);else throw Error("The currently set adapter does not support count");
break;case m.fixed:case m.na:a.resolve(c.count);break;default:throw Error('Unrecognised count mode "'+e.J()+'"');}return a.m}}var m=b.Ya={ob:"none",j:"adapter",fixed:"fixed",na:"detect"};b.ab=m.j;b.Ab=0;b.tb=0;b.qb=1;b.mb=Number.ca||Number.MAX_VALUE;b.aa=d.aa;b.Z=d.Z;b.ea=d.ea;b.fa=d.fa;b.ba=p.ba;b.$=p.$;b.R=p.R;return b}])})(x,x.P("dataConductor"));D.ca=x.ha()})(window);
