'use strict';(function(){var x;x=function(){function t(d,b,m){var g;if(d[b])throw Error('factory named "'+b+'" already exists!');if(!Array.isArray(m))throw Error("def MUST be an array. (Injection may only be done in the array styles)");g=m.slice(0,m.length-1);m=m[m.length-1];if("function"!==typeof m)throw Error("last item in the definition array MUST be a function");g=g.map(function(b){if(d[b])return d[b];if(r[b])return r[b];throw Error('No factory named "'+b+'" found');});g=m.apply(d,g);d[b]=g;throw Error("not implemented");
}function p(d){function b(b){var e=m(d[b]);m(g[b])&&e?p(d[b],g[b]):d[b]=g[b]}function m(b){var d=typeof b;return!b||"function"!==d&&"object"!==d?null:d}var g,e;return 2>arguments.length?d:m(d)?(g=arguments[1],m(g)&&(e=Object.keys(g),e.forEach(b)),e=Array.prototype.slice.call(arguments,2),e.unshift(d),p.apply({},e)):d}function e(d,b){var m,g,k,r,q;if(d===b)return!0;if(d&&b&&"function"!==typeof d&&"function"!==typeof b&&(m=Object.keys(d),g=Object.keys(b),m.length===g.length)){m.sort();g.sort();for(q=
0;q<m.length;q++){if(m[q]!==g[q])return!1;k=d[m[q]];r=b[g[q]];k=e(k,r);if(!k)return!1}return!0}return!1}var k={},r=function(){var d={};d.Va=function(){function b(b){var e=d();return b(e.resolve,e.reject)}function d(){function b(c,w){w.apply(a,c)}var m=!1,e=[],k=[],f=[],c=[],a;return a={resolve:function(){m||(m=!0,e.forEach(b.bind(null,Array.prototype.slice.call(arguments))),c.forEach(b))},reject:function(){m||(m=!0,f.forEach(b.bind(null,Array.prototype.slice.call(arguments))),c.forEach(b))},qb:function(){k.forEach(b.bind(null,
Array.prototype.slice.call(arguments)))},l:function(){return{then:function(a,c,b){if("function"!==typeof a)throw Error("handler MUST be a function");e.push(a);"function"===typeof c&&k.push(c);"function"===typeof b&&f.push(b)},catch:function(a){if("function"!==typeof a)throw Error("handler MUST be a function");f.push(a)},La:function(a){if("function"!==typeof a)throw Error("handler MUST be a function");c.push(a)}}}()}}b.defer=d;b.all=function(d){function m(a,z){c--;k[a]=z;c||f.resolve(k)}function e(){f.reject.apply(f,
Array.prototype.slice.call(arguments))}var k,f,c;if(!d||"object"!==typeof d)throw Error("promises MUST be an object or an Array");Array.isArray(d)?k=[]:k={};f=b.defer();c=Object.keys(k).length;Object.keys(d).forEach(function(a){d.then(m.bind(null,a),void 0,e)});return f.l};return b}();d.Fb=function(){function b(b,e){var k,f=d.Va.defer();f.then(b);k=g.length;g[k]=f;m[k]=f.l;setTimeout(function(){g.splice(k,1);m.splice(k,1);f.resolve()},e);return f.l}var m=[],g=[];b.cancel=function(b){b=m.indexOf(b);
return-1<b?(g[b].reject("cancelled"),!0):!1};return b}();return d}();return{R:function(d){var b;if(1===arguments.length)return k[d]||null;if(k[d])throw Error("module named "+d+" already exists!");b={ha:{}};b.V=t.bind(null,b.ha);k[d]=b},Ka:e,extend:p,ha:function(){var d=k.dataConductor;return d?d.ha:{}}}}();x.R("dataConductor",[]);(function(t){t.V("jsdcObjectStorageService",function(){return function(){function p(b){return d[b]||null}function e(b){var m=p(b);delete d[b];return m||null}function k(b){if(!b||
"object"!==typeof b)throw Error("adapter MUST be an object");r.Ha.forEach(function(d){if("function"!==typeof b[d])throw Error('Object invalid. A function named "'+d+'" is expected to exist on the adapter');});r.la.forEach(function(d){if(b.hasOwnProperty(d)&&"function"!==typeof b[d])throw Error('Object invalid. When supplied on the adapter, the property named "'+d+'" MUST be a function');});r.$a.forEach(function(d){var g=b[d];if(!g||"object"!==typeof g)throw Error('Object invalid. An object property named "'+
d+'" is expected to exist on the adapter');})}var r=this,d={};this.Ha=[];this.la=[];this.$a=[];this.add=function(b,e){var g;a:{g=typeof b;null===b&&(g="null");switch(g){case "string":case "number":case "boolean":case "undefined":case "null":g=!0;break a;case "function":case "object":g=!1;break a}g=void 0}if(!g)throw Error("name MUST be a value type");if(d[b])throw Error('object named "'+b+'" already exists');k(e);return d[b]=e};this.remove=e;this.all=function(){return Object.keys(d).map(function(b){return{name:b,
s:d[b]}})};this.find=p;this.Db=k;this.clear=function(){r.all().map(function(b){return b.name}).forEach(e)}}})})(x.R("dataConductor"));(function(t){t.V("jsdcAdapterService",["jsdcObjectStorageService",function(p){function e(){p.call(this);this.Ha.push("find");this.la.push("count");this.la.push("info")}e.global=new e;return e}])})(x.R("dataConductor"));(function(t){t.V("jsdcIndexedCollection",function(){return function(p,e){function k(a,c,w){var d=b(a,w);if(a===p&&f[a][d]&&f[a][d].value===w&&-1<f[a][d].keys.indexOf(c))throw Error('cannot add duplicate primary key ("'+
c+'")!');f[a][d]&&f[a][d].value===w||f[a].splice(d,0,{value:w,keys:[]});f[a][d].keys.push(c)}function r(a,c,d){var u=f[a];a=b(a,d);u[a]&&u[a].value===d&&(d=u[a].keys,c=d.indexOf(c),-1<c&&(d.splice(c,1),d.length||u.splice(a,1)))}function d(a,c){var d=b(a,c);return f[a][d]&&f[a][d].value===c?f[a][d].keys:null}function b(a,c){function b(a,c,d,z){var f,u;d===z?a[d]&&a[d].value<c&&d++:(f=Math.floor(d/2+z/2),u=a[f].value,u===c?d=f:u<c?(f+1<=z&&f++,d=b(a,c,f,z)):(f-1>=d&&f--,d=b(a,c,d,f)));return d}var d=
f[a];return d.length?b(d,c,0,d.length-1):0}function m(a,c,b){function d(f){var g=a[f];return g?c[g]>b[g]?1:c[g]<b[g]?-1:d(f+1):0}return d(0)}function g(a){return v[a]}var t=0,v={},q={},f={},c;if(!p||"string"!==typeof p)throw Error("primary MUST be a non empty string");if(!Array.isArray(e))throw Error("fields MUST be an array");e=e.slice();e.unshift(p);for(c=0;c<e.length;c++)f[e[c]]=[];this.find=function(a,c){var b;if(1===arguments.length)c=a,a=p;else if(!f[a])throw Error('index named "'+a+'" does not exist');
b=d(a,c);null===b&&(b=[]);return b.map(function(a){return v[a]})};this.ma=function(a){return v[a]||null};this.add=function(a){var c=a[p],b={};e.forEach(function(c){b[c]=a[c]});v[c]=a;q[c]=b;e.forEach(function(b){k(b,c,a[b])});t++};this.remove=function(a){var c;e.forEach(function(c){r(c,a,q[a][c])});delete q[a];c=v[a];delete v[a];t--;return c};this.count=function(){return t};this.update=function(a){var c=a[p];e.forEach(function(b){var d=q[c][b],f=a[b];d!==f&&(r(b,c,d),k(b,c,f));q[c][b]=a[b]})};this.all=
function(a){function c(b){return b.keys.map(g).sort(m.bind(null,a))}Array.isArray(a)||(a=[a]);a=a.slice();var b=a[0]||p,d;-1===a.indexOf(p)&&a.push(p);if(f[b])return a.shift(),d=f[b].map(c),b=[],b=b.concat.apply(b,d);throw Error('index named "'+b+'" could not be found!');};this.clear=function(){t=0;v={};q={};e.forEach(function(a){f[a]=[]})};this.min=function(a,c){function b(a){return a.keys}var d,e;1===arguments.length&&(c=a,a=p);c=c||1;if(1>c)throw Error("supplied count MUST be greater than 0");
if(f[a])e=f[a].slice(0,c),e=e.map(b),d=[],d=d.concat.apply(d,e);else throw Error('index named "'+a+'" could not be found!');d=d.slice(0,c);return d.map(g)};this.max=function(a,c){var b,d;1===arguments.length&&(c=a,a=p);c=c||1;if(1>c)throw Error("supplied count MUST be greater than 0");if(f[a])b=f[a].length-1,d=f[a].slice(b-c,b),b=[],b=b.concat.apply(b,d);else throw Error('index named "'+a+'" could not be found!');b=b.slice(b.length-c,b.length);return b.map(g)};this.pa=function(a,c){function d(a){return a.keys}
var g,e;1===arguments.length&&(c=a,a=p);if(f[a])g=b(a,c),g=f[a].slice(0,g).map(d),e=[],e=e.concat.apply(e,g);else throw Error('index named "'+a+'" could not be found!');return e};this.Ma=function(a,c){function d(a){return a.keys}var g,e;1===arguments.length&&(c=a,a=p);if(f[a])e=f[a].length,g=b(a,c),f[a][g]&&f[a][g].value===c&&g++,g=f[a].slice(g,e).map(d),e=[],e=e.concat.apply(e,g);else throw Error('index named "'+a+'" could not be found!');return e}}})})(x.R("dataConductor"));(function(t){t.V("jsdcQueue",
[function(){return function(){function p(){var d;e?(d=e.data,(e=e.next)||(k=null),r--):d=null;return d}var e=null,k=null,r=0;this.fb=function(d){null===e?e=k={data:d,next:null}:k=k.next={data:d,next:null};r++};this.tb=function(d){null===e?e=k={data:d,next:null}:e={data:d,next:e};r++};this.cb=p;this.remove=function(d){var b=e;if(b.data===d)return p();for(;b.next;){if(b.next.data===d)return b.next=b.next.next||null,r--,d;b=b.next}return null};this.sb=function(){var d,b,k=e;d=d||0;for(b=0;b<d&&k;b++)k=
k.next;return k?k.data:null};this.count=function(){return r};this.all=function(){for(var d=[],b=e;b;)d.push(b.data),b=b.next;return d}}}])})(x.R("dataConductor"));(function(t){t.V("jsdcIndexedPageCache",["jsdcEventEmitter","jsdcIndexedCollection",function(p,e){function k(){function g(a,b,d,f,g){q=(q+1)%(Number.fa||Number.MAX_VALUE);a={index:a,w:b,O:d,G:f,data:g,Oa:null,H:q};c.items.add(a);return a}function t(a,b){function d(c){k(c.length,function(b){k(a,p.bind(null,c[b]*a))})}function e(c){m(c.length,
function(b){m(a,p.bind(null,c[b]*a))})}function k(a,c){for(var b=0;b<a;b++)c(b)}function m(a,c){for(var b=a-1;0<=b;b--)c(b)}function p(d,h){var e=d+h,k=d+h,n=a,m=b,l,w;n||(n=f.j());m||(m=f.j());l=Math.floor(e/n);e%=n;w=Math.floor(k/m);k%=m;if(l!==w||e!==k)if(l=c.items.ma(l)){for(;l.data.length<n;)l.data.push(r);var u=c.items.ma(w),m=Date.now(),q,A,n=l?l.data.length:f.j();if(u)l&&(w=1/n,n=1-w,q=l.w*w+u.w*n,m=l.G*w+u.G*n,A=l.O*w+u.O*n,u.w=q,u.O=A,u.G=m);else{q=l?l.w:1;A=l?l.O:m;m=l?l.G:m;u=q;q=A;var t=
[];for(A=0;A<n;A++)t.push(r);u=g(w,u,q,m,t)}u.data[k]=l.data[e];l.data[e]=r}else(e=c.items.ma(w))&&(e.data[k]=r)}function q(a){for(var c=0;c<h.length;c++)for(;h[c].data.length<a;)h[c].data.push(r)}var v,n,h;a!==b&&(v=c.items.Ma(-1),n=c.items.pa(0),a>b?(e(v),d(n)):(h=c.items.all(),q(b),d(v),e(n)),h=c.items.all(),k(h.length,function(a){for(;h[a].data.length>b;)h[a].data.pop();-1<h[a].data.indexOf(r)&&c.items.remove(h[a].index)}))}function v(a){function d(a){c.items.remove("number"===typeof a?a:a.index)}
var e=f.count();if(a<e){switch(f.D()){case b.O:a=c.items.min("stored",e-a);break;case b.G:a=c.items.min("modified",e-a);break;case b.w:a=c.items.min("touched",e-a);break;case b.H:a=c.items.min("order",e-a);break;default:if("function"===typeof f.D())a=f.D()(c.items,a);else throw Error('Unrecognized purge mode "'+f.D()+'". Must be one of the following '+Object.keys(b).join(", ")+" or a function to be called with the items and count,  expecting an array of indexes to be removed to be returned.");}a.forEach(d)}}
var q=0,f=this,c={items:new e("index",["touched","stored","modified","order"]),o:k.mb,D:k.Eb,C:k.jb,F:k.Wa,j:k.Cb};p.call(this);this.ba=b;this.$=d;this.S=m;this.j=function(){return c.j};this.Aa=function(a){var b;a=Math.floor(a);if(a!==c.j){if(0<a)f.F()===m.clear?c.items.clear():(t(c.j,a),v(f.o()));else throw Error("pageSize MUST be a positive integer");b=c.j;c.j=a;f.b("pageSizeChanged",a,b)}return a};this.F=function(){return c.F};this.Ca=function(a){var b;if(m[a])b=c.F,c.F=a,b!==a&&f.b("resizeChanged",
a,b);else throw Error("resizeMode invalid. MUST be one of the following value: "+Object.keys(m).join(", ")+'. Got "'+a+'"');};this.C=function(){return c.C};this.xa=function(a){function b(a){c.items.remove(a)}var e;if(d[a])a!==c.C&&(a===d.ja&&(e=c.items.pa(0),e.forEach(b)),e=c.C,c.C=a,f.b("indexModeChanged",a,e));else throw Error("invalid indexMode value. MUST be one of the following value: "+Object.keys(d).join(", ")+'. Got "'+a+'"');};this.o=function(){return c.o};this.Sa=function(a){var b=f.o();
a=a+1-1;if(0<a)a=Math.floor(a),v(a),c.o=a;else throw Error("maxItems MUST be a number greater than 0");b!==a&&f.b("maxItemsChanged",a,b);return c.o};this.D=function(){return c.D};this.Ta=function(a){var d=f.D();if(b[a])c.D=a;else if("function"===typeof a)c.D=a;else throw Error('invalid purgeMode value "'+a+'". MUST be one of the following: "'+Object.keys(b)+'"');d!==a&&f.b("purgeModeChanged",a,d)};this.state=function(){return{o:f.o(),D:f.D(),C:f.C(),F:f.F(),j:f.j()}};this.ca=function(a){if(!a||"object"!==
typeof a)throw Error("supplied state MUST be an object");a.hasOwnProperty("maxItems")&&f.Sa(a.o);a.hasOwnProperty("purgeMode")&&f.Ta(a.D);a.hasOwnProperty("indexMode")&&f.xa(a.C);a.hasOwnProperty("resizeMode")&&f.Ca(a.F);a.hasOwnProperty("pageSize")&&f.Aa(a.j)};this.f=function(a,b){var e;a=a+1-1;if(isNaN(a))throw Error("index MUST be a number");if(!Array.isArray(b))throw Error("cached items MUST be arrays");if(c.C===d.ja&&0>a)throw Error('index MUST be greater than or equal to 0 when indexMode is "positive"');
e=c.items.find(a);e.length?(e[0].w++,e[0].G=(new Date).getTime(),e[0].data=b,c.items.update(e[0])):(g(a,1,(new Date).getTime(),(new Date).getTime(),b),v(f.o()),f.b("cached",b));return b};this.Bb=function(a){a=(a=c.items.remove(a))&&a.data;f.b("uncached",a);return a};this.count=function(){return c.items.count()};this.U=function(a){return c.items.all(a||"index").map(function(a){return{O:a.O,G:a.G,w:a.w,data:a.data,index:a.index}})};this.data=function(a){a=c.items.find(a);var b=a[0]&&a[0].data;a[0]&&
(a[0].w++,c.items.update(a[0]));return b||null};this.info=function(a){a=c.items.find(a);var b=null;a[0]&&(b={w:a[0].w,O:a[0].O,G:a[0].G,H:a[0].H});return b};this.Oa=function(a){a=c.items.find(a);var b;a[0]?b=a[0].Oa:b=null;return b};this.clear=c.items.clear}var r={},d={ja:"positive",Hb:"full"},b={O:"stored",G:"modified",w:"touched",H:"order"},m={clear:"clear",ob:"maintain"};k.mb=Number.MAX_VALUE;k.Cb=10;k.Eb=b.w;k.jb=d.ja;k.Wa=m.clear;k.ba=b;k.$=d;k.S=m;return k}])})(x.R("dataConductor"));(function(t){t.V("jsdcEventEmitter",
[function(){return function(){function p(k,r){var d;e[k]?d=e[k]:("boolean"===typeof r?r:1)?(d=[],e[k]=d):d=null;return d}var e={};this.h=function(e,r){p(e).push(r)};this.b=function(e){function r(d){try{try{d.apply(d,b)}catch(e){console.warn("Event handler raised an error!"),console.error(e)}}catch(k){console.error("event handler caused error"),console.log(k)}}var d=p(e,!1),b;d&&(b=Array.prototype.slice(arguments),b.shift(),d.forEach(r))}}}])})(x.R("dataConductor"));(function(t,p){p.V("jsdcLoaderService",
["$timeout","$q","jsdcEventEmitter","jsdcAdapterService","jsdcQueue","jsdcIndexedPageCache",function(e,k,r,d,b,m){function g(){function a(){n.f().clear();n.info().forEach(function(a){a.cancel()})}function z(a){a=n.info(a);return a.U||a.g||a.Pa||a.i}function w(a){function c(a){return parseInt(a,10)}var b,d,f,e,l;d=[];b=Object.keys(a).map(c);f=h.f.U();l=f.map(x);l=l.concat(b);l=l.concat(Object.keys(h.g).map(c));l=l.concat(Object.keys(h.i).map(c));l=l.filter(function(a,b,c){return c.indexOf(a)===b});
for(b=0;b<l.length;b++)e=b<f.length?f[b]:null,e=u(l[b],e,a[l[b]],h.g[l[b]],h.i[l[b]]),d.push(e);d.sort(function(a,b){return a.index-b.index});return d}function u(a,b,c,d,f){var e=null,l,h;b||(e=c||d||f);e?(l=e.loaded.l,h=e.cancel):(l=k.defer(),l.resolve(b||null),l=l.l,h=E);return{index:a,gb:!!b||!!d||!!f||!!c,U:b,m:e&&e.m||!1,g:!!d,i:!!f,Pa:!!c,cancel:h,loaded:l}}function D(){function a(b){var c,d,e,f,y,g,k,m=l.c.map(x);l.m=!0;d=Math.min.apply(Math,m);for(c=0;c<l.c.length;c++)y=l.c[c],g=Math.floor(y.index/
y.count),delete h.g[g],e=y.index-d,f=e+y.count,n.B()===v.ia&&null!==n.f().info(g)||n.f().f(g,b.slice(e,f));for(c=0;c<l.c.length;c++)y=l.c[c],e=y.index-d,f=e+y.count,k=b.slice(e,f),g=Math.floor(y.index/y.count),n.b("loaded",g,k),y.loaded.resolve(b.slice(e,f));b={Ib:m,data:b};u.resolve(b);n.b("executed",b)}function b(a){function c(a){var b;b=l.c[a].index/l.c[a].count;h.i[b].splice(h.i[b].indexOf(l.c[a]),1);0===h.i[b].length&&delete h.i[b];d(l.c[a])}var f,y,g;l.m=!0;for(f=0;f<l.c.length;f++)l.c[f].Qa?
(l.c[f].Qa--,y=n.N(),c=d.bind(null,l.c[f]),g=Math.floor(l.c[f].index/l.c[f].count),Array.isArray(h.i[g])||(h.i[g]=[]),h.i[g].push(l.c[f]),y?e(c.bind(null,f),y):c()):d(l.c[f],a);u.reject(a)}function c(a){function b(a){return!a.m}var e;if(!l.m)if(n.A()===f.all){l.m=!0;l.cancel.resolve();for(e=0;e<l.c.length;e++)d(l.c[e],l.c[e].index===a?"cancelled":!1);u.reject("cancelled")}else if(n.A()===f.ia)for(e=l.c.filter(b),1===e.length&&(l.m=!0,l.cancel.resolve(),u.reject("cancelled")),e=0;e<l.c.length;e++)l.c[e].index===
a&&d(l.c[e],"cancelled");else throw Error('unrecognised batch cancel mode "'+n.A()+'"');}function d(a,b){b?(a.m=!0,a.loaded.reject(b)):(a.g=!1,a.m=!1,h.v.tb(a),n.P()===q.Ia?n.ga(!0):n.ga());delete h.g[Math.floor(a.index/a.count)]}var g,m,l,u;if(!h.I)throw Error("adapter has not been set. You must set an adapter before calling execute.");for(l=B();null===l&&h.v.count();)l=B();u=k.defer();if(l){for(g=0;g<l.c.length;g++)m=Math.floor(l.c[g].index/l.c[g].count),h.g[m]=l.c[g],l.c[g].g=!0,l.c[g].Ua&&l.c[g].Ua.then(c.bind(null,
l.c[g].index));l.cancel=k.defer();g=h.I.find(h.filter,{Lb:l.index,Jb:l.count,cancel:l.cancel.l});g.then(a).catch(b)}else u.resolve([]);return u.l}function B(){function a(b,c){b.index===c.index?b.count=Math.max(b.count,c.count):(b.count+=c.count,c.index<b.index&&(b.index-=c.count));b.c.push(c)}function b(a,c){var d=!1;n.J()&&c&&c!==p&&a.count<n.T()&&(d=a.index===c.index||a.index+a.count===c.index||a.index-c.count===c.index);return d}for(var c,d,e=null;!e||b(e,h.v.sb());){c=h.v.cb();if(!c||c===p)break;
e||(e={index:c.index,count:0,c:[],m:!1});a(e,c)}e&&1===e.c.length&&n.B()===v.ia&&(d=Math.floor(e.index/e.count),c=z(d))&&(n.b("ignored",d),Array.isArray(c)?e.c[0].loaded.resolve(c):c.loaded.l.then(e.c[0].loaded.resolve).catch(e.c[0].loaded.reject),e=null);return e}function C(){function a(c){return this[c]}function b(a,c){return a.H-c.H}var c=h.v.count()+Object.keys(h.g).length+Object.keys(h.i).length,d=n.L();if(c>d)for(c=h.v.all().concat(Object.keys(h.g).map(a.bind(h.g))).concat(Object.keys(h.g).map(a.bind(h.i))),
c.sort(b);c.length>d;)c[0].cancel(),c.shift()}function x(a){return a.index}function E(){}var n=this,h={H:0,s:null,I:null,filter:null,f:new m,v:new b,qa:0,g:{},i:{},B:g.ib,P:g.hb,u:g.Ga,J:g.fa,M:g.Xa,N:g.Ya,A:g.ab,T:g.Fa,L:g.kb,W:g.lb};r.call(this);this.aa=v;this.Z=q;this.f=function(){return h.f};this.s=function(){return h.s};this.I=function(){return h.I};this.sa=function(a){var c,b;if("string"===typeof a){if(c=d.global.find(a),!c)throw Error('adapter named "'+a+'" not found!');}else if("object"===
typeof a)d.global.Db(a),c=a;else throw Error('invalid adapter value. MUST be a string or an object. Got a "'+typeof a+'"');b=h.s;h.s=a;a!==b&&n.b("adapterChanged",a,b);h.I=c};this.filter=function(){return h.filter};this.ka=function(c){var b;t.Ka(h.filter,c)||(b=h.filter,h.filter=c,a(),n.b("filterChanged",c,b))};this.u=function(){return h.u};this.Ba=function(a){var c;if(1<=a)c=h.u,c!==a&&(h.u=a,n.b("parallelChanged",a,c));else throw Error("parallel MUST be a number greater than or equal to 1");};this.J=
function(){return h.J};this.va=function(a){var c=h.J;a!==c&&(h.J=a,n.b("batchingChanged",a,c))};this.A=function(){return h.A};this.ta=function(a){var c;if(f[a])c=h.A,a!==c&&(h.A=a,n.b("batchCancelModeChanged",a,c));else throw Error('invalid batchCancelMode value "'+a+'". Must be one of the following: '+Object.keys(f).join(", "));};this.T=function(){return h.T};this.L=function(){return h.L};this.ya=function(a){var c;if(0<a)c=h.L,c!==a&&(h.L=a,C(),n.b("loadMaxChanged",a,c));else throw Error("loadMax MUST be a number greater than 0");
};this.W=function(){return h.W};this.za=function(a){var b;if(c[a])b=h.W,a!==b&&(h.W=a,n.b("loadOverflowModeChanged",a,b));else throw Error('invalid loadOverflowMode value "'+a+'". Must be one of the following: '+Object.keys(c).join(", "));};this.ua=function(a){if(0<a)h.T=a;else throw Error("batchMax MUST be a number greater than 0");};this.P=function(){return h.P};this.Ra=function(a){var c;if(q[a])c=h.P,a!==c&&(h.P=a,n.b("executionModeChanged",a,c));else throw Error('invalid executionMode value "'+
a+'". Must be one of the following: '+Object.keys(q).join(", "));};this.B=function(){return h.B};this.wa=function(a){var c;if(v[a])c=h.B,a!==c&&(h.B=a,n.b("existingModeChanged",a,c));else throw Error('invalid existing mode value "'+a+'". MUST be one of the following: '+Object.keys(v).join(", "));};this.N=function(){return h.N};this.Ea=function(a){var c;if(0<=a)c=h.N,a!==c&&(h.N=a,n.b("retryDelayChanged",a,c));else throw Error("retryDelay MUST be number greater than or equal to 0");};this.M=function(){return h.M};
this.Da=function(a){var c;if(0<=a)c=h.M,a!==c&&(h.M=a,n.b("retryCountChanged",a,c));else throw Error("retryCount MUST be number greater than or equal to 0");};this.state=function(){return{s:n.s(),filter:n.filter(),B:n.B(),P:n.P(),u:n.u(),J:n.J(),M:n.M(),N:n.N(),A:n.A()}};this.ca=function(a){if(!a||"object"!==typeof a)throw Error("supplied state MUST be an object");a.hasOwnProperty("adapter")&&n.sa(a.s);a.hasOwnProperty("filter")&&n.ka(a.filter);a.hasOwnProperty("existingMode")&&n.wa(a.B);a.hasOwnProperty("executionMode")&&
n.Ra(a.P);a.hasOwnProperty("parallel")&&n.Ba(a.u);a.hasOwnProperty("batching")&&n.va(a.J);a.hasOwnProperty("batchMax")&&n.ua(a.T);a.hasOwnProperty("loadMax")&&n.ya(a.L);a.hasOwnProperty("loadOverflowMode")&&n.za(a.W);a.hasOwnProperty("retryCount")&&n.Da(a.M);a.hasOwnProperty("retryDelay")&&n.Ea(a.N);a.hasOwnProperty("batchCancelMode")&&n.ta(a.A)};this.load=function(a,b){function d(){f.resolve();g.m||(g.m=!0,g.g||h.v.remove(g))}var e,f,g,l;a=parseInt(a,10);if(isNaN(a))throw Error("supplied index MUST be a number");
e=k.defer();if(n.B()===v.Ja&&(l=n.info(a),l.gb&&!l.m))return n.b("dropped",a),l.U?e.resolve(l.U):l.loaded.then(e.resolve).catch(e.reject),e.l;h.H=(h.H+1)%(Number.fa||Number.MAX_VALUE);l=h.f.j();f=k.defer();g={index:a*l,H:h.H,loaded:e,cancel:d,Ua:f.l,m:!1,Qa:n.M(),g:!1,count:l};if(b)if("function"===typeof b.then)b.then(d);else throw Error("when supplied, cancel MUST be a promise");h.v.fb(g);if(h.v.count()+Object.keys(h.g).length+Object.keys(h.i).length>n.L())if(n.W()===c.cancel)C(n.L());else throw Error("loadMax loads reached. Wait until some loads have completed before attempting to load new records.");
h.P===q.Na&&n.ga();return e.l};this.info=function(a){var c=h.v.all(),b,d={},e;for(b=0;b<c.length;b++)e=Math.floor(c[b].index/c[b].count),d[e]=c[b];0<arguments.length?(c=n.f().data(a),d=u(a,c,d[a],h.g[a],h.i[a])):d=w(d);return d};this.ga=function(a){function c(){for(var a=n.u();h.qa<a&&h.v.count();)b()}function b(){h.qa++;D().then(d).La(e)}function d(a){g.push(a)}function e(){h.qa--;!a&&h.v.count()?c():f.resolve(g)}var f,g=[];f=k.defer();h.v.count()?a?b():c():f.resolve(g);return f.l};this.clear=a}
var p={},v=g.aa={replace:"replace",ia:"ignore",Ja:"drop"},q=g.Z={Na:"instant",Ia:"delayed"},f=g.da={all:"all",ia:"ignore"},c=g.ea={error:"error",cancel:"cancel"};g.Ga=1;g.fa=!1;g.Ya=2E3;g.Xa=0;g.kb=Number.MAX_VALUE;g.Fa=Number.MAX_VALUE;g.ib=v.Ja;g.hb=q.Na;g.ab=f.all;g.lb=c.error;return g}])})(x,x.R("dataConductor"));(function(t,p){p.V("jsdcIndexedPagerService",["$q","jsdcEventEmitter","jsdcIndexedPageCache","jsdcLoaderService",function(e,k,p,d){function b(){function g(a,c,b){b=parseInt(b,10);isNaN(b)||
c[b].then(a.qb.bind(a,b))}function p(){return c.a.f().j()}function r(){c.a.clear();c.index=null;c.count=0}function q(){function a(a,b){b&&c.K===m.na&&(c.count=Math.max(c.count,a))}function b(){t--;t||d()}function d(a){a&&(r=a);!t&&r&&q.resolve(r)}var g=f.index()-f.Y(),k=f.index()+f.X(),p=!1,q=e.defer(),r,t;c.a.f().C()===c.a.f().$.ja&&(g=Math.max(0,g));if(null===f.index()||c.oa)return q.resolve([]),{exec:q.l};for(;c.a.f().o()<k-g;)p?k--:g++,p=!p;p={};for(t=0;g<=k;g++)t++,p[g]=c.a.load(g),p[g].then(a.bind(null,
g)).La(b);c.a.ga().then(d).catch(q.reject);p.exec=q.l;return p}var f=this,c={index:null,oa:!1,Kb:b.rb,ra:b.nb,Y:b.Ab,X:b.ub,K:b.bb,a:new d,count:0};k.call(this);this.Za=m;this.aa=b.aa;this.Z=b.Z;this.da=b.da;this.ba=b.ba;this.$=b.$;this.S=b.S;this.ea=b.ea;c.a.f().Ta(function(a,c){function b(a){return isNaN(a)?null:a}var d,e,g,k,m=f.index();d=a.pa(m);e=a.Ma(m);for(c--;c;)g=b(d[d.length-1]),k=b(e[0]),null!==g&&null!==k?(g=Math.abs(g-m),k=Math.abs(k-m),g>k?e.shift():d.pop()):null!==g?d.pop():e.shift(),
c--;return d.concat(e)});c.a.Ra(d.Z.Ia);c.a.f().h("pageSizeChanged",this.b.bind(this,"pageSizeChanged"));c.a.f().h("indexModeChanged",this.b.bind(this,"indexModeChanged"));c.a.f().h("maxItemsChanged",this.b.bind(this,"maxPagesChanged"));c.a.f().h("cached",this.b.bind(this,"cached"));c.a.f().h("uncached",this.b.bind(this,"removed"));c.a.h("adapterChanged",this.b.bind(this,"adapterChanged"));c.a.h("filterChanged",this.b.bind(this,"filterChanged"));c.a.h("parallelChanged",this.b.bind(this,"parallelChanged"));
c.a.h("batchingChanged",this.b.bind(this,"batchingChanged"));c.a.h("batchCancelMode",this.b.bind(this,"batchCancelMode"));c.a.h("existingModeChanged",this.b.bind(this,"existingModeChanged"));c.a.h("retryDelayChanged",this.b.bind(this,"retryDelayChanged"));c.a.h("retryCountChanged",this.b.bind(this,"retryCountChanged"));c.a.h("dropped",this.b.bind(this,"dropped"));c.a.h("ignored",this.b.bind(this,"ignored"));c.a.h("loaded",this.b.bind(this,"loaded"));this.index=function(){return c.index};this.wb=function(a){var b,
d;a=Math.floor(a);if(isNaN(a))throw Error("index MUST be a number");d=c.index;b=e.defer();c.index=a;d!==a&&f.b("indexChanged",a,d);a=q();Object.keys(a).forEach(g.bind(null,b,a));a.exec.then(b.resolve).catch(b.reject)};this.s=function(){return c.a.s()};this.sa=function(a,b){var e=c.a.sa(a);if(!b){var g=f.I(),k={u:d.Ga,max:d.Fa,eb:!1};"function"===typeof g.info&&(g=g.info(),g.hasOwnProperty("parallel")&&(k.u=g.u),g.hasOwnProperty("max")&&(k.T=g.max),g.hasOwnProperty("dynamic")&&(k.F=g.eb?c.a.f().S.ob:
c.a.f().S.clear));f.ca(k)}return e};this.Y=function(){return c.Y};this.zb=function(a){var b;a=Math.floor(a);if(0<=a)b=c.Y,c.Y=a,b!==a&&f.b("padLowChanged",a,b),b=q(),a=e.defer(),Object.keys(b).forEach(g.bind(null,a,b)),b.exec.then(a.resolve).catch(a.reject);else throw Error("padLow MUST be set to a number greater than or equal to 0");};this.X=function(){return c.X};this.yb=function(a){var b;a=Math.floor(a);if(0<=a)b=c.X,c.X=a,b!==a&&f.b("padHighChanged",a,b),b=q(),a=e.defer(),Object.keys(b).forEach(g.bind(null,
a,b)),b.exec.then(a.resolve).catch(a.reject);else throw Error("padHigh MUST be set to a number greater than or equal to 0");};this.K=function(){return c.K};this.vb=function(a){var b;if(m[a])b=c.K,c.K=a,a===m.na?c.count=c.a.f().U().length:c.count=0,b!==a&&f.b("countModeChanged",a,b);else throw Error('invalid countMode "'+a+'". MUST be one of the following values: '+Object.keys(m).join(", "));};this.filter=function(){return c.a.filter()};this.ka=function(a){t.Ka(f.filter(),a)||(c.a.ka(a),r())};this.j=
p;this.Aa=function(a){function b(a,d){a=Math.abs(a.index-c.index);d=Math.abs(d.index-c.index);return a===d?0:a>d?1:-1}var d=c.a.f(),e;a!==p()&&(d.Aa(a),d.F()===d.S.clear||0===d.count()?c.index=null:null===d.info(c.index)&&(e=d.U().sort(b),c.index=e[0]),c.count=d.count());return a};this.state=function(){var a;a=c.a.f().state();a=t.extend(a,c.a.state());a.ra=a.o;delete a.o;return a=t.extend(a,{index:f.index(),Y:f.Y(),X:f.X(),K:f.K(),filter:f.filter()})};this.ca=function(a){if(!a||"object"!==typeof a)throw Error("supplied state MUST be an object");
c.a.f().ca(a);c.a.ca(a);c.oa=!0;a.hasOwnProperty("filter")&&f.ka(a.filter);a.hasOwnProperty("index")&&f.wb(a.index);a.hasOwnProperty("maxPages")&&f.xb(a.ra);a.hasOwnProperty("padLow")&&f.zb(a.Y);a.hasOwnProperty("padHigh")&&f.yb(a.X);c.oa=!1;a.hasOwnProperty("countMode")&&f.vb(a.K);a=q();return a=a.exec};this.F=c.a.f().F;this.Ca=c.a.f().Ca;this.C=c.a.f().C;this.xa=c.a.f().xa;this.ra=c.a.f().o;this.xb=c.a.f().Sa;this.I=c.a.I;this.u=c.a.u;this.Ba=c.a.Ba;this.J=c.a.J;this.va=c.a.va;this.T=c.a.T;this.ua=
c.a.ua;this.A=c.a.A;this.ta=c.a.ta;this.L=c.a.L;this.ya=c.a.ya;this.W=c.a.W;this.za=c.a.za;this.M=c.a.M;this.Da=c.a.Da;this.N=c.a.N;this.Ea=c.a.Ea;this.B=c.a.B;this.wa=c.a.wa;this.clear=r;this.page=function(a){a=c.a.info(a);var b;a?b={index:a.index,data:a.U,g:a.Pa||a.g||a.i,cancel:a.cancel}:b=null;return b};this.remove=c.a.f().Bb;this.count=function(){var a=e.defer();switch(f.K()){case m.pb:a.resolve(null);break;case m.s:if(c.a.I().count)c.a.I().count(f.filter()).then(a.resolve).catch(a.reject);else throw Error("The currently set adapter does not support count");
break;case m.fixed:case m.na:a.resolve(c.count);break;default:throw Error('Unrecognised count mode "'+f.K()+'"');}return a.l}}var m=b.Za={pb:"none",s:"adapter",fixed:"fixed",na:"detect"};b.bb=m.s;b.Ab=0;b.ub=0;b.rb=1;b.nb=Number.fa||Number.MAX_VALUE;b.aa=d.aa;b.Z=d.Z;b.da=d.da;b.ea=d.ea;b.ba=p.ba;b.$=p.$;b.S=p.S;return b}])})(x,x.R("dataConductor"));modules.Gb=x.ha()})(module);
